"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var fs=_interopDefault(require("fs")),BlobStream=_interopDefault(require("blob-stream")),PDFDocument=require("@react-pdf/pdfkit"),PDFDocument__default=_interopDefault(PDFDocument),ReactFiberReconciler=_interopDefault(require("react-reconciler")),R=require("ramda"),isUrl=_interopDefault(require("is-url")),fontkit=_interopDefault(require("@react-pdf/fontkit")),fetch=_interopDefault(require("cross-fetch")),url=_interopDefault(require("url")),path=_interopDefault(require("path")),PNG=_interopDefault(require("@react-pdf/png-js")),emojiRegex=_interopDefault(require("emoji-regex")),matchMedia=_interopDefault(require("media-engine")),Yoga=_interopDefault(require("yoga-layout-prebuilt")),layoutEngine=_interopDefault(require("@react-pdf/textkit/layout")),linebreaker=_interopDefault(require("@react-pdf/textkit/engines/linebreaker")),justification=_interopDefault(require("@react-pdf/textkit/engines/justification")),textDecoration=_interopDefault(require("@react-pdf/textkit/engines/textDecoration")),scriptItemizer=_interopDefault(require("@react-pdf/textkit/engines/scriptItemizer")),wordHyphenation=_interopDefault(require("@react-pdf/textkit/engines/wordHyphenation")),AttributedString=_interopDefault(require("@react-pdf/textkit/attributedString")),PDFRenderer=_interopDefault(require("@react-pdf/textkit/renderers/pdf"));const propsEqual=(e,t)=>{const o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(let r=0;r<o.length;r++){const i=o[r];if("render"!==i){if("children"!==i&&e[i]!==t[i]){if("object"==typeof e[i]&&"object"==typeof t[i]&&propsEqual(e[i],t[i]))continue;return!1}if("children"===i&&("string"==typeof e[i]||"string"==typeof t[i]))return e[i]===t[i]}else if(!e[i]!=!t[i])return!1}return!0},emptyObject={},createRenderer=e=>ReactFiberReconciler({supportsMutation:!0,appendInitialChild(t,o){t.children.push(o),e()},createInstance:(e,{style:t,children:o,...r})=>({type:e,box:{},style:t||{},props:r||{},children:[]}),createTextInstance:(e,t)=>({type:"TEXT_INSTANCE",value:e}),finalizeInitialChildren:(e,t,o)=>!1,getPublicInstance:e=>e,prepareForCommit(){},prepareUpdate:(e,t,o,r)=>!propsEqual(o,r),resetAfterCommit(e,t,o){},resetTextContent(e){},getRootHostContext:()=>emptyObject,getChildHostContext:()=>emptyObject,shouldSetTextContent:(e,t)=>!1,now:Date.now,useSyncScheduling:!0,appendChild(t,o){t.children.push(o),e()},appendChildToContainer(t,o){t.children.push(o),e()},insertBefore(t,o,r){const i=t.children.indexOf(r);-1!==i&&o&&t.children.splice(i,0,o),e()},removeChild(t,o){const r=t.children.indexOf(o);-1!==r&&t.children.splice(r,1),e()},removeChildFromContainer(t,o){const r=t.children.indexOf(o);-1!==r&&t.children.splice(r,1),e()},commitTextUpdate(t,o,r){t.value=r,e()},commitUpdate(t,o,r,i,a){const{style:n,...s}=a;t.props=s,t.style=n,e()}}),VIEW="VIEW",TEXT="TEXT",LINK="LINK",PAGE="PAGE",NOTE="NOTE",IMAGE="IMAGE",DOCUMENT="DOCUMENT",CANVAS="CANVAS",TEXT_INSTANCE="TEXT_INSTANCE",DPI=72,FONT_WEIGHTS={thin:100,hairline:100,ultralight:200,extralight:200,light:300,normal:400,medium:500,semibold:600,demibold:600,bold:700,ultrabold:800,extrabold:800,heavy:900,black:900},PAGE_SIZES={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},PORTRAIT="portrait",LANDSCAPE="landscape",INHERITED_PROPERTIES=["color","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","opacity","textDecoration","lineHeight","textAlign","visibility","wordSpacing"],RULER_WIDTH=13,RULER_COLOR="white",RULER_FONT_SIZE=6,DEFAULT_RULER_STEPS=50,LINE_WIDTH=.5,LINE_COLOR="gray",GRID_COLOR="#ababab",BOX_MODEL_REGEX=/\d+(px|in|mm|cm|pt|%|vw|vh)?/g,OBJECT_POSITION_REGEX=/\d+(px|in|mm|cm|pt|%|vw|vh)?/g,BORDER_SHORTHAND_REGEX=/(\d+(px|in|mm|cm|pt|vw|vh)?)\s(\S+)\s(\S+)/,TRANSFORM_ORIGIN_REGEX=/(-?\d+(px|in|mm|cm|pt|%|vw|vh)?)|top|right|bottom|left|center/g,matchBoxModel=R.match(BOX_MODEL_REGEX),matchObjectPosition=R.match(OBJECT_POSITION_REGEX),matchBorderShorthand=R.match(BORDER_SHORTHAND_REGEX),matchTransformOrigin=R.match(TRANSFORM_ORIGIN_REGEX),isFontWeightStyle=e=>e.match(/^fontWeight/),isBorderStyle=(e,t)=>e.match(/^border(Top|Right|Bottom|Left)(Color|Width|Style)/)&&"string"==typeof t,isBoxModelStyle=(e,t)=>e.match(/^(margin)|(padding)/)&&"string"==typeof t,isObjectPositionStyle=(e,t)=>e.match(/^objectPosition/)&&"string"==typeof t,isTransformOriginStyle=(e,t)=>e.match(/^transformOrigin/)&&"string"==typeof t,processBorders=(e,t)=>{const o=matchBorderShorthand(t);if(o){if(e.match(/.Color/))return o[4];if(e.match(/.Style/))return o[3];if(e.match(/.Width/))return o[1];throw new Error(`StyleSheet: Invalid '${t}' for '${e}'`)}return t},processBoxModel=(e,t)=>{const o=matchBoxModel(t);if(o){if(e.match(/.Top/))return o[0];if(e.match(/.Right/))return o[1]||o[0];if(e.match(/.Bottom/))return o[2]||o[0];if(e.match(/.Left/))return o[3]||o[1]||o[0];throw new Error(`StyleSheet: Invalid '${t}' for '${e}'`)}return t},processFontWeight=(e,t)=>t?"number"==typeof t?t:FONT_WEIGHTS[t.toLowerCase()]:FONT_WEIGHTS.normal,processObjectPosition=(e,t)=>{const o=matchObjectPosition(t);if(o){if(e.match(/.X/))return o[0];if(e.match(/.Y/))return o[1];throw new Error(`StyleSheet: Invalid '${t}' for '${e}'`)}return t},transformOffsetKeywords=e=>{switch(e){case"top":case"left":return"0%";case"right":case"bottom":return"100%";case"center":return"50%";default:return e}},processTransformOrigin=(e,t)=>{const o=matchTransformOrigin(t);if(o){let r;if(e.match(/.X/))r=o[0];else{if(!e.match(/.Y/))throw new Error(`StyleSheet: Invalid '${t}' for '${e}'`);r=o[1]||o[0]}return transformOffsetKeywords(r)}return t},matchNumber=R.when(R.is(String),R.compose(R.complement(R.isEmpty),R.match(/^-?\d*\.?\d*$/))),castFloat=R.when(matchNumber,e=>parseFloat(e,10)),transformStyles=e=>{const t=Object.keys(e),o={};for(let r=0;r<t.length;r++){const i=t[r],a=e[i];o[i]=R.compose(castFloat,R.cond([[isBorderStyle,processBorders],[isBoxModelStyle,processBoxModel],[isObjectPositionStyle,processObjectPosition],[isTransformOriginStyle,processTransformOrigin],[isFontWeightStyle,processFontWeight],[R.T,R.always(a)]]))(i,a)}return o},fetchFont=async(e,t)=>{const o=await fetch(e,t),r=await(o.buffer?o.buffer():o.arrayBuffer());return"Buffer"===r.constructor.name?r:Buffer.from(r)};class FontSource{constructor(e,t,o,r,i){this.src=e,this.fontFamily=t,this.fontStyle=o||"normal",this.fontWeight=processFontWeight(r)||400,this.data=null,this.loading=!1,this.options=i}async load(){if(this.loading=!0,isUrl(this.src)){const{headers:e,body:t,method:o="GET"}=this.options,r=await fetchFont(this.src,{method:o,body:t,headers:e});this.data=fontkit.create(r)}else this.data=await new Promise((e,t)=>fontkit.open(this.src,(o,r)=>o?t(o):e(r)));this.loading=!1}}class Font{static create(e){return new Font(e)}constructor(e){this.family=e,this.sources=[]}register({src:e,fontWeight:t,fontStyle:o,...r}){this.sources.push(new FontSource(e,this.fontFamily,o,t,r))}resolve(e){const{fontWeight:t=400,fontStyle:o="normal"}=e,r=this.sources.filter(e=>e.fontStyle===o),i=r.find(e=>e.fontWeight===t);if(i)return i;let a;if(t>=400&&t<=500){const e=r.filter(e=>e.fontWeight<=t),o=r.filter(e=>e.fontWeight>500);a=r.filter(e=>e.fontWeight>=t&&e.fontWeight<500)[0]||e[e.length-1]||o[0]}const n=r.filter(e=>e.fontWeight<t),s=r.filter(e=>e.fontWeight>t);if(t<400&&(a=n[n.length-1]||s[0]),t>500&&(a=s[0]||n[n.length-1]),!a)throw new Error(`Could not resolve font for ${this.fontFamily}, fontWeight ${t}`);return a}}let emojiSource;const registerEmojiSource=({url:e,format:t="png"})=>{emojiSource={url:e,format:t}},getEmojiSource=()=>emojiSource;var emoji={registerEmojiSource:registerEmojiSource,getEmojiSource:getEmojiSource},standardFonts=["Courier","Courier-Bold","Courier-Oblique","Helvetica","Helvetica-Bold","Helvetica-Oblique","Times-Roman","Times-Bold","Times-Italic"];let hyphenationCallback;const registerHyphenationCallback=e=>{hyphenationCallback=e},getHyphenationCallback=()=>hyphenationCallback;var hyphenation={registerHyphenationCallback:registerHyphenationCallback,getHyphenationCallback:getHyphenationCallback};function printWarning(e,...t){let o=0;const r="Warning: "+e.replace(/%s/g,()=>t[o++]);"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(e){}}const __DEV__="production"!==process.env.NODE_ENV,warning=__DEV__?(e,t,...o)=>{if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||printWarning(t,...o)}:()=>{};let fonts={};const register=(e,t)=>{"object"==typeof e?t=e:(warning(!1,"Font.register will not longer accept the font source as first argument. Please move it into the data object. For more info refer to https://react-pdf.org/fonts"),t.src=e);const{family:o}=t;if(fonts[o]||(fonts[o]=Font.create(o)),t.fonts)for(let e=0;e<t.fonts.length;e++)fonts[o].register({family:o,...t.fonts[e]});else fonts[o].register(t)},getRegisteredFonts=()=>fonts,getRegisteredFontFamilies=()=>Object.keys(fonts),getFont=e=>{const{fontFamily:t}=e;if(standardFonts.includes(t))return null;if(!fonts[t])throw new Error(`Font family not registered: ${t}. Please register it calling Font.register() method.`);return fonts[t].resolve(e)},load=async function(e){const{fontFamily:t}=e;if(standardFonts.includes(t))return;const o=getFont(e);o.data||o.loading||await o.load()},reset=function(){for(const e in fonts)fonts.hasOwnProperty(e)&&(fonts[e].data=null)},clear=function(){fonts={}};var Font$1={register:register,getRegisteredFonts:getRegisteredFonts,getRegisteredFontFamilies:getRegisteredFontFamilies,getFont:getFont,load:load,clear:clear,reset:reset,...emoji,...hyphenation};const isImage=R.propEq("type",IMAGE);PNG.isValid=function(e){try{return!!new PNG(e)}catch(e){return!1}};const MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487];class JPEG{constructor(e){if(this.data=null,this.width=null,this.height=null,this.data=e,65496!==e.readUInt16BE(0))throw new Error("SOI not found in JPEG");let t,o=2;for(;o<e.length&&(t=e.readUInt16BE(o),o+=2,!MARKERS.includes(t));)o+=e.readUInt16BE(o);if(!MARKERS.includes(t))throw new Error("Invalid JPEG.");o+=3,this.height=e.readUInt16BE(o),o+=2,this.width=e.readUInt16BE(o)}}JPEG.isValid=function(e){if(!e||!Buffer.isBuffer(e)||65496!==e.readUInt16BE(0))return!1;let t,o=2;for(;o<e.length&&(t=e.readUInt16BE(o),o+=2,!MARKERS.includes(t));)o+=e.readUInt16BE(o);return!!MARKERS.includes(t)};const createCache=({limit:e=100}={})=>{let t={},o=[];return{get:e=>t[e],set:(r,i)=>{o.push(r),o.length>e&&delete t[o.shift()],t[r]=i},reset:()=>{t={},o=[]},length:()=>o.length}},IMAGE_CACHE=createCache({limit:30}),getAbsoluteLocalPath=e=>{const{protocol:t,auth:o,host:r,port:i,hostname:a,path:n}=url.parse(e),s=path.resolve(n);if(!(t&&"file:"!==t||o||r||i||a))return s},fetchLocalFile=e=>new Promise((t,o)=>{try{const r=getAbsoluteLocalPath(e);if(!r)return o(new Error(`Cannot fetch non-local path: ${e}`));fs.readFile(r,(e,r)=>e?o(e):t(r))}catch(e){o(e)}}),fetchRemoteFile=async(e,t)=>{const o=await fetch(e,t),r=await(o.buffer?o.buffer():o.arrayBuffer());return"Buffer"===r.constructor.name?r:Buffer.from(r)},isValidFormat=e=>{const t=e.toLowerCase();return"jpg"===t||"jpeg"===t||"png"===t},guessFormat=e=>{let t;return JPEG.isValid(e)?t="jpg":PNG.isValid(e)&&(t="png"),t},isCompatibleBase64=({uri:e})=>/^data:image\/[a-zA-Z]*;base64,[^"]*/g.test(e);function getImage(e,t){switch(t.toLowerCase()){case"jpg":case"jpeg":return new JPEG(e);case"png":return new PNG(e);default:return null}}const resolveBase64Image=({uri:e})=>{const t=/^data:image\/([a-zA-Z]*);base64,([^"]*)/g.exec(e),o=t[1],r=t[2];if(!isValidFormat(o))throw new Error(`Base64 image invalid format: ${o}`);return new Promise(e=>e(getImage(Buffer.from(r,"base64"),o)))},resolveImageFromData=e=>{if(e.data&&e.format)return new Promise(t=>t(getImage(e.data,e.format)));throw new Error(`Invalid data given for local file: ${JSON.stringify(e)}`)},resolveBufferImage=e=>{const t=guessFormat(e);if(t)return new Promise(o=>o(getImage(e,t)))},getImageFormat=e=>{const t=137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7],o=255===e[0]&&216===e[1]&&255===e[2];let r="";if(t)r="png";else{if(!o)throw new Error("Not valid image extension");r="jpg"}return r},resolveImageFromUrl=async e=>{const{uri:t,body:o,headers:r,method:i="GET"}=e,a=getAbsoluteLocalPath(t)?await fetchLocalFile(t):await fetchRemoteFile(t,{body:o,headers:r,method:i});return getImage(a,getImageFormat(a))},resolveImage=(e,{cache:t=!0}={})=>{const o=e.data?e.data.toString():e.uri;if(t&&IMAGE_CACHE.get(o))return IMAGE_CACHE.get(o);let r;if(!(r=isCompatibleBase64(e)?resolveBase64Image(e):Buffer.isBuffer(e)?resolveBufferImage(e):"object"==typeof e&&e.data?resolveImageFromData(e):resolveImageFromUrl(e)))throw new Error("Cannot resolve image");return t&&IMAGE_CACHE.set(o,r),r},getSource=R.compose(R.when(R.is(String),e=>({uri:e})),R.either(R.path(["props","src"]),R.path(["props","source"]))),fetchImage=async e=>{const t=getSource(e),{cache:o}=e.props;if(t)try{e.image=await resolveImage(t,{cache:o})}catch(t){e.image={width:0,height:0},console.warn(t.message)}else warning(!1,'Image should receive either a "src" or "source" prop')},emojis={},regex=emojiRegex(),reflect=e=>(...t)=>e(...t).then(e=>e,e=>e),makeFetchEmojiImage=()=>reflect(resolveImage),_removeNoColor=e=>"ï¸"!==e,getCodePoints=e=>Array.from(e).filter(_removeNoColor).map(e=>e.codePointAt(0).toString(16)).join("-"),buildEmojiUrl=e=>{const{url:t,format:o}=Font$1.getEmojiSource();return`${t}${getCodePoints(e)}.${o}`},fetchEmojis=e=>{const t=Font$1.getEmojiSource();if(!t||!t.url)return[];const o=[];let r;for(;r=regex.exec(e);){const e=r[0];if(!emojis[e]||emojis[e].loading){const t=buildEmojiUrl(e);emojis[e]={loading:!0};const r=makeFetchEmojiImage();o.push(r({uri:t}).then(t=>{emojis[e].loading=!1,emojis[e].data=t.data}))}}return o},embedEmojis=e=>{const t=[];for(let o=0;o<e.length;o++){const r=e[o];let i,a=0;for(;i=regex.exec(r.string);){const e=i.index,o=i[0],n=r.attributes.fontSize,s=r.string.slice(a,e+i[0].length);emojis[o]&&emojis[o].data?t.push({string:s.replace(i,String.fromCharCode(65532)),attributes:{...r.attributes,attachment:{width:n,height:n,yOffset:Math.floor(.1*n),image:emojis[o].data}}}):t.push({string:s.replace(i,String.fromCharCode(0)),attributes:r.attributes}),a=e+o.length}a<r.string.length&&t.push({string:r.string.slice(a),attributes:r.attributes})}return t},fetchAssets=e=>{const t=[],o=e.children.slice(0);for(;o.length>0;){const e=o.shift();isImage(e)&&t.push(fetchImage(e)),e.style&&e.style.fontFamily&&t.push(Font$1.load(e.style)),"string"==typeof e&&t.push(...fetchEmojis(e)),"string"==typeof e.value&&t.push(...fetchEmojis(e.value)),e.children&&e.children.forEach(e=>{o.push(e)})}return t},resolveAssets=e=>R.compose(R.then(R.always(e)),e=>Promise.all(e),fetchAssets)(e),compact=R.filter(Boolean),isArray=R.is(Array),isNotArray=R.complement(isArray),castArray=R.when(isNotArray,e=>[e]),mergeStyles=e=>e.reduce((e,t)=>{const o=isArray(t)?flatten(t):t;return Object.keys(o).forEach(t=>{null!==o[t]&&void 0!==o[t]&&(e[t]=o[t])}),e},{}),flatten=R.compose(mergeStyles,compact,castArray),hasOwnProperty=Object.prototype.hasOwnProperty,styleShorthands={margin:{marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0},marginHorizontal:{marginLeft:!0,marginRight:!0},marginVertical:{marginTop:!0,marginBottom:!0},padding:{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0},paddingHorizontal:{paddingLeft:!0,paddingRight:!0},paddingVertical:{paddingTop:!0,paddingBottom:!0},border:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0,borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0,borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0,borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderTop:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0},borderRight:{borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0},borderBottom:{borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0},borderLeft:{borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderColor:{borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0},borderRadius:{borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0},borderStyle:{borderTopStyle:!0,borderRightStyle:!0,borderBottomStyle:!0,borderLeftStyle:!0},borderWidth:{borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0},objectPosition:{objectPositionX:!0,objectPositionY:!0},transformOrigin:{transformOriginX:!0,transformOriginY:!0}},expandedKeys=R.keys(styleShorthands),expandStyles=e=>{if(!e)return e;const t=Object.keys(e),o={};for(let r=0;r<t.length;r++){const i=t[r],a=e[i];if(R.includes(i,expandedKeys)){const e=styleShorthands[i];for(const t in e)hasOwnProperty.call(e,t)&&(o[t]=a)}else o[i]=a}return o},parseValue=e=>{const t=/^(-?\d*\.?\d+)(in|mm|cm|pt|vh|vw)?$/g.exec(e);return t?{value:parseFloat(t[1],10),unit:t[2]||"pt"}:{value:e,unit:void 0}},transformUnit=R.curryN(2,(e,t)=>{const o=parseValue(t);switch(o.unit){case"in":return 72*o.value;case"mm":return o.value*(1/25.4)*72;case"cm":return o.value*(1/2.54)*72;case"vh":return o.value*(e.height/100);case"vw":return o.value*(e.width/100);default:return o.value}}),transformUnits=(e,t)=>R.map(transformUnit(e),t);var transformUnits$1=R.curryN(2,transformUnits);const resolveMediaQueries=(e,t)=>Object.keys(t).reduce((o,r)=>/@media/.test(r)?{...o,...matchMedia({[r]:t[r]},e)}:{...o,[r]:t[r]},{});var resolveMediaQueries$1=R.curryN(2,resolveMediaQueries);const resolveStyles=e=>R.compose(transformUnits$1(e),transformStyles,expandStyles,resolveMediaQueries$1(e),flatten),resolveNodeStyles=e=>t=>{const o=R.propOr({},"box",e);return R.evolve({style:resolveStyles(o),children:R.map(resolveNodeStyles(e))})(t)},resolvePageStyles=e=>{const t=R.propOr({},"box",e);return R.evolve({children:R.map(resolveNodeStyles(e)),style:R.compose(transformUnits$1(t),transformStyles,expandStyles,flatten)})(e)};var resolveStyles$1=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageStyles)}))});const resolveZIndex=e=>R.evolve({children:R.compose(R.map(resolveZIndex),R.sortBy(R.path(["style","zIndex"])))})(e),hasVerticalRuler=R.either(R.hasPath(["props","ruler"]),R.hasPath(["props","verticalRuler"])),hasHorizontalRuler=R.either(R.hasPath(["props","ruler"]),R.hasPath(["props","horizontalRuler"])),adjustPageSize=R.compose(R.when(hasVerticalRuler,R.evolve({box:{height:R.add(13)},children:R.map(R.evolve({box:{top:R.add(13)}}))})),R.when(hasHorizontalRuler,R.evolve({box:{width:R.add(13)},children:R.map(R.evolve({box:{left:R.add(13)}}))}))),resolveRulers=R.evolve({children:R.map(R.evolve({children:R.map(adjustPageSize)}))}),isPercent=e=>/((-)?\d+\.?\d*)%/g.exec(e),matchPercent=e=>{const t=isPercent(e);if(t){const e=parseFloat(t[1],10),o=e/100;return{value:e,percent:o,absValue:Math.abs(e),absPercent:Math.abs(o)}}return null},getTransformStyle=e=>R.pathOr("50%",["style",e]),getOrigin=e=>{if(!e.box)return{};const{left:t,top:o,width:r,height:i}=e.box,a=getTransformStyle("transformOriginX")(e),n=getTransformStyle("transformOriginY")(e),s=matchPercent(a),l=matchPercent(n);return{left:t+(s?r*s.percent:a),top:o+(l?i*l.percent:n)}},resolveNodeOrigin=e=>R.compose(R.evolve({children:R.map(resolveNodeOrigin)}),R.converge(R.assoc("origin"),[getOrigin,R.identity]))(e),resolveOrigin=R.evolve({children:R.map(R.evolve({children:R.map(resolveNodeOrigin)}))}),VALID_ORIENTATIONS=[PORTRAIT,LANDSCAPE],getOrientation=R.compose(R.ifElse(R.includes(R.__,VALID_ORIENTATIONS),R.identity,R.always(PORTRAIT)),R.pathOr(PORTRAIT,["props","orientation"])),isLandscape=R.compose(R.equals(LANDSCAPE),getOrientation),toSizeObject=R.applySpec({width:R.prop(0),height:R.prop(1)}),flipSizeObject=R.applySpec({width:R.prop("height"),height:R.prop("width")}),getStringSize=R.compose(toSizeObject,R.prop(R.__,PAGE_SIZES),R.toUpper),getNumberSize=R.compose(toSizeObject,e=>[e]),throwInvalidError=e=>{throw new Error(`Invalid Page size: ${JSON.stringify(e)}`)},getSize=e=>{const t=R.compose(R.cond([[R.is(String),getStringSize],[R.is(Array),toSizeObject],[R.is(Number),getNumberSize],[R.is(Object),R.identity],[R.T,throwInvalidError]]),R.pathOr("A4",["props","size"]))(e);return isLandscape(e)?flipSizeObject(t):t},assocIfNil=(e,t,o)=>R.when(R.compose(R.isNil,R.prop(e)),R.assoc(e,t))(o);var assocIfNil$1=R.curryN(3,assocIfNil);const resolvePageSize=e=>t=>{const o=getSize(t);return R.evolve({[e]:R.merge(R.__,o)})(t)},resolvePageSizes=e=>R.evolve({children:R.map(R.evolve({children:R.map(R.compose(resolvePageSize(e),assocIfNil$1(e,{})))}))}),isNotNil=R.complement(R.isNil),firstPass=(...e)=>t=>{let o;for(const r of e)if(o=r(t),isNotNil(o))return o;return o},getComputedMargin=e=>t=>{const o=t._yogaNode;return o?o.getComputedMargin(e):null},getMargin=R.applySpec({marginTop:firstPass(getComputedMargin(Yoga.EDGE_TOP),R.path(["box","marginTop"]),R.path(["style","marginTop"]),R.path(["style","marginVertical"]),R.path(["style","margin"]),R.always(0)),marginRight:firstPass(getComputedMargin(Yoga.EDGE_RIGHT),R.path(["box","marginRight"]),R.path(["style","marginRight"]),R.path(["style","marginHorizontal"]),R.path(["style","margin"]),R.always(0)),marginBottom:firstPass(getComputedMargin(Yoga.EDGE_BOTTOM),R.path(["box","marginBottom"]),R.path(["style","marginBottom"]),R.path(["style","marginVertical"]),R.path(["style","margin"]),R.always(0)),marginLeft:firstPass(getComputedMargin(Yoga.EDGE_LEFT),R.path(["box","marginLeft"]),R.path(["style","marginLeft"]),R.path(["style","marginHorizontal"]),R.path(["style","margin"]),R.always(0))}),getComputedPadding=e=>t=>{const o=t._yogaNode;return o?o.getComputedPadding(e):null},getPadding=R.applySpec({paddingTop:firstPass(getComputedPadding(Yoga.EDGE_TOP),R.path(["box","paddingTop"]),R.path(["style","paddingTop"]),R.path(["style","paddingVertical"]),R.path(["style","padding"]),R.always(0)),paddingRight:firstPass(getComputedPadding(Yoga.EDGE_RIGHT),R.path(["box","paddingRight"]),R.path(["style","paddingRight"]),R.path(["style","paddingHorizontal"]),R.path(["style","padding"]),R.always(0)),paddingBottom:firstPass(getComputedPadding(Yoga.EDGE_BOTTOM),R.path(["box","paddingBottom"]),R.path(["style","paddingBottom"]),R.path(["style","paddingVertical"]),R.path(["style","padding"]),R.always(0)),paddingLeft:firstPass(getComputedPadding(Yoga.EDGE_LEFT),R.path(["box","paddingLeft"]),R.path(["style","paddingLeft"]),R.path(["style","paddingHorizontal"]),R.path(["style","padding"]),R.always(0))}),getTop=e=>e?e.getComputedTop():0,getRight=e=>e?e.getComputedRight():0,getBottom=e=>e?e.getComputedBottom():0,getLeft=e=>e?e.getComputedLeft():0,getPosition=e=>{const t=e._yogaNode;return R.applySpec({top:getTop,right:getRight,bottom:getBottom,left:getLeft})(t)},DEFAULT_DIMENSION={width:0,height:0},getDimension=e=>{const t=e._yogaNode;return t?{width:t.getComputedWidth(),height:t.getComputedHeight()}:DEFAULT_DIMENSION},getComputedBorder=e=>t=>t?t.getComputedBorder(e):0,getBorderWidth=e=>{const t=e._yogaNode;return R.applySpec({borderTopWidth:getComputedBorder(Yoga.EDGE_TOP),borderRightWidth:getComputedBorder(Yoga.EDGE_RIGHT),borderBottomWidth:getComputedBorder(Yoga.EDGE_BOTTOM),borderLeftWidth:getComputedBorder(Yoga.EDGE_LEFT)})(t)},upperFirst=R.ifElse(R.isNil,R.identity,R.compose(R.join(""),R.juxt([R.compose(R.toUpper,R.head),R.tail]))),setYogaValue=(e,t)=>o=>R.tap(r=>{const i=r._yogaNode;if(!R.isNil(o)&&i){const r=R.complement(R.isNil)(t),a=`set${upperFirst(e)}`,n=`${a}Auto`,s=`${a}Percent`,l=matchPercent(o);if(l&&!i[s])throw new Error(`You can't pass percentage values to ${e} property`);l?r?i[s](t,l.value):i[s](l.value):"auto"===o?r?i[n](t):i[n]():r?i[a](t,o):i[a](o)}}),setFlex=setYogaValue("flex"),setDisplay=e=>R.tap(t=>{const o=t._yogaNode;o&&o.setDisplay("none"===e?Yoga.DISPLAY_NONE:Yoga.DISPLAY_FLEX)}),setOverflow=e=>R.tap(t=>{const o=t._yogaNode;if(!R.isNil(e)&&o){const t=R.cond([[R.equals("hidden"),R.always(Yoga.OVERFLOW_HIDDEN)],[R.equals("scroll"),R.always(Yoga.OVERFLOW_SCROLL)],[R.T,R.always(Yoga.OVERFLOW_VISIBLE)]])(e);o.setOverflow(t)}}),setFlexWrap=e=>R.tap(t=>{const o=t._yogaNode;if(o){const t=R.cond([[R.equals("wrap"),R.always(Yoga.WRAP_WRAP)],[R.equals("wrap-reverse"),R.always(Yoga.WRAP_WRAP_REVERSE)],[R.T,R.always(Yoga.WRAP_NO_WRAP)]])(e);o.setFlexWrap(t)}}),setFlexGrow=R.compose(setYogaValue("flexGrow"),R.defaultTo(0)),setFlexBasis=setYogaValue("flexBasis"),setAlign=e=>t=>R.tap(o=>{const r=o._yogaNode;if(r){const o=R.cond([[R.equals("flex-start"),R.always(Yoga.ALIGN_FLEX_START)],[R.equals("center"),R.always(Yoga.ALIGN_CENTER)],[R.equals("flex-end"),R.always(Yoga.ALIGN_FLEX_END)],[R.equals("stretch"),R.always(Yoga.ALIGN_STRETCH)],[R.equals("baseline"),R.always(Yoga.ALIGN_BASELINE)],[R.equals("space-between"),R.always(Yoga.ALIGN_SPACE_BETWEEN)],[R.equals("space-around"),R.always(Yoga.ALIGN_SPACE_AROUND)],[R.T,R.always(Yoga.ALIGN_AUTO)]])(t);r[`setAlign${upperFirst(e)}`](o)}}),setAlignSelf=setAlign("self"),setFlexShrink=R.compose(setYogaValue("flexShrink"),R.defaultTo(1)),setAspectRatio=e=>R.tap(t=>{const o=t._yogaNode;!R.isNil(e)&&o&&o.setAspectRatio(e)}),setAlignContent=setAlign("content"),setPositionType=e=>R.tap(t=>{const o=t._yogaNode;!R.isNil(e)&&o&&o.setPositionType("absolute"===e?Yoga.POSITION_TYPE_ABSOLUTE:Yoga.POSITION_TYPE_RELATIVE)}),isRow=R.equals("row"),isRowReverse=R.equals("row-reverse"),isColumnReverse=R.equals("column-reverse"),setFlexDirection=e=>R.tap(t=>{const o=t._yogaNode;if(o){const t=R.cond([[isRow,R.always(Yoga.FLEX_DIRECTION_ROW)],[isRowReverse,R.always(Yoga.FLEX_DIRECTION_ROW_REVERSE)],[isColumnReverse,R.always(Yoga.FLEX_DIRECTION_COLUMN_REVERSE)],[R.T,R.always(Yoga.FLEX_DIRECTION_COLUMN)]])(e);o.setFlexDirection(t)}}),setJustifyContent=e=>R.tap(t=>{const o=t._yogaNode;if(!R.isNil(e)&&o){const t=R.cond([[R.equals("center"),R.always(Yoga.JUSTIFY_CENTER)],[R.equals("flex-end"),R.always(Yoga.JUSTIFY_FLEX_END)],[R.equals("space-between"),R.always(Yoga.JUSTIFY_SPACE_BETWEEN)],[R.equals("space-around"),R.always(Yoga.JUSTIFY_SPACE_AROUND)],[R.equals("space-evenly"),R.always(Yoga.JUSTIFY_SPACE_EVENLY)],[R.T,R.always(Yoga.JUSTIFY_FLEX_START)]])(e);o.setJustifyContent(t)}}),setMarginTop=setYogaValue("margin",Yoga.EDGE_TOP),setMarginRight=setYogaValue("margin",Yoga.EDGE_RIGHT),setMarginBottom=setYogaValue("margin",Yoga.EDGE_BOTTOM),setMarginLeft=setYogaValue("margin",Yoga.EDGE_LEFT),setMargin=e=>R.tap(t=>{setMarginTop(e)(t),setMarginRight(e)(t),setMarginBottom(e)(t),setMarginLeft(e)(t)}),setPaddingTop=setYogaValue("padding",Yoga.EDGE_TOP),setPaddingRight=setYogaValue("padding",Yoga.EDGE_RIGHT),setPaddingBottom=setYogaValue("padding",Yoga.EDGE_BOTTOM),setPaddingLeft=setYogaValue("padding",Yoga.EDGE_LEFT),setBorderTop=setYogaValue("border",Yoga.EDGE_TOP),setBorderRight=setYogaValue("border",Yoga.EDGE_RIGHT),setBorderBottom=setYogaValue("border",Yoga.EDGE_BOTTOM),setBorderLeft=setYogaValue("border",Yoga.EDGE_LEFT),setPositionTop=setYogaValue("position",Yoga.EDGE_TOP),setPositionRight=setYogaValue("position",Yoga.EDGE_RIGHT),setPositionBottom=setYogaValue("position",Yoga.EDGE_BOTTOM),setPositionLeft=setYogaValue("position",Yoga.EDGE_LEFT),setWidth=setYogaValue("width"),setMinWidth=setYogaValue("minWidth"),setMaxWidth=setYogaValue("maxWidth"),setHeight=setYogaValue("height"),setMinHeight=setYogaValue("minHeight"),setMaxHeight=setYogaValue("maxHeight"),isText=R.propEq("type",TEXT),isNote=R.propEq("type",NOTE),isPage=R.propEq("type",PAGE),isCanvas=R.propEq("type",CANVAS);class StandardFont{constructor(e){this.name=e,this.src=PDFDocument.PDFFont.open(null,e)}layout(e){const[t,o]=this.src.encode(e);return{positions:o,stringIndices:o.map((e,t)=>t),glyphs:t.map((e,t)=>{const r=this.getGlyph(parseInt(e,16));return r.advanceWidth=o[t].advanceWidth,r})}}glyphForCodePoint(e){const t=this.getGlyph(e);return t.advanceWidth=400,t}getGlyph(e){return{id:e,_font:this.src,codePoints:[e],isLigature:!1,name:this.src.font.characterToGlyph(e)}}hasGlyphForCodePoint(e){return".notdef"!==this.src.font.characterToGlyph(e)}get ascent(){return 900}get descent(){switch(this.name){case"Times-Roman":case"Times-Bold":case"Times-Italic":return-220;case"Courier":case"Courier-Bold":case"Courier-Oblique":return-230;default:return-200}}get lineGap(){return 0}get unitsPerEm(){return 1e3}}const fontCache={},IGNORED_CODE_POINTS=[173],getFontSize=R.pathOr(12,["attributes","fontSize"]),getOrCreateFont=e=>{if(fontCache[e])return fontCache[e];const t=new StandardFont(e);return fontCache[e]=t,t},getFallbackFont=()=>getOrCreateFont("Helvetica"),shouldFallbackToFont=(e,t)=>!IGNORED_CODE_POINTS.includes(e)&&!t.hasGlyphForCodePoint(e)&&getFallbackFont().hasGlyphForCodePoint(e),fontSubstitution=()=>({string:e,runs:t})=>{let o=null,r=0,i=0;const a=[];for(const n of t){const t=getFontSize(n),s="string"==typeof n.attributes.font?getOrCreateFont(n.attributes.font):n.attributes.font;if(0===e.length){a.push({start:0,end:0,attributes:{font:s}});break}for(const l of e.slice(n.start,n.end)){const e=l.codePointAt(),n=shouldFallbackToFont(e,s)?getFallbackFont():s;n!==o&&(o&&a.push({start:r,end:i,attributes:{font:o,scale:o?t/o.unitsPerEm:0}}),o=n,r=i),i+=l.length}}if(r<e.length){const i=getFontSize(R.last(t));a.push({start:r,end:e.length,attributes:{font:o,scale:o?i/o.unitsPerEm:0}})}return{string:e,runs:a}},capitalize=e=>e?e.replace(/(^|\s)\S/g,e=>e.toUpperCase()):e,IGNORABLE_CODEPOINTS=[8232,8233],buildSubsetForFont=e=>IGNORABLE_CODEPOINTS.reduce((t,o)=>e.hasGlyphForCodePoint&&e.hasGlyphForCodePoint(o)?t:[...t,String.fromCharCode(o)],[]),ignoreChars=e=>e.map(e=>{const t=buildSubsetForFont(e.attributes.font),o=new RegExp(t.join("|"));return{string:e.string.replace(o,""),attributes:e.attributes}}),isTextInstance=R.propEq("type",TEXT_INSTANCE),PREPROCESSORS=[ignoreChars,embedEmojis],transformText=(e,t)=>{switch(t){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();case"capitalize":return capitalize(e);case"upperfirst":return upperFirst(e);default:return e}},getFragments=e=>{if(!e)return[{string:""}];let t=[];const{color:o="black",backgroundColor:r,fontFamily:i="Helvetica",fontWeight:a,fontStyle:n,fontSize:s=18,textAlign:l="left",lineHeight:d,textDecoration:c,textDecorationColor:g,textDecorationStyle:h,textTransform:p,letterSpacing:u,textIndent:R,opacity:m}=e.style,f=Font$1.getFont({fontFamily:i,fontWeight:a,fontStyle:n}),y={font:f?f.data:i,color:o,opacity:m,fontSize:s,backgroundColor:r,align:l,indent:R,link:e.src,characterSpacing:u,underlineStyle:h,underline:"underline"===c,underlineColor:g||o,strike:"line-through"===c,strikeStyle:h,strikeColor:g||o,lineHeight:d?d*s:null};e.children.forEach(e=>{isImage(e)?t.push({string:String.fromCharCode(65532),attributes:{...y,attachment:{width:e.style.width||s,height:e.style.height||s,image:e.image.data}}}):isTextInstance(e)?t.push({string:transformText(e.value,p),attributes:y}):e&&t.push(...getFragments(e))});for(const e of PREPROCESSORS)t=e(t);return t},getAttributedString=e=>AttributedString.fromFragments(getFragments(e)),engines={linebreaker:linebreaker,justification:justification,textDecoration:textDecoration,scriptItemizer:scriptItemizer,wordHyphenation:wordHyphenation,fontSubstitution:fontSubstitution},engine=layoutEngine(engines),getContainer=(e,t,o)=>{return{x:0,y:0,width:t,maxLines:R.path(["style","maxLines"],e),height:o||1/0,truncateMode:R.path(["style","textOverflow"],e)}},getLayoutOptions=e=>({hyphenationPenalty:e.props.hyphenationPenalty,hyphenationCallback:Font$1.getHyphenationCallback(),shrinkWhitespaceFactor:{before:-.5,after:-.5}}),layoutText=R.compose(R.reduce(R.concat,[]),R.converge(engine,[getAttributedString,getContainer,getLayoutOptions])),linesWidth=e=>e.lines?Math.max(...e.lines.map(e=>AttributedString.advanceWidth(e))):-1,linesHeight=e=>e.lines?e.lines.reduce((e,t)=>e+t.box.height,0):-1,measureText=(e,t,o,r,i,a)=>r===Yoga.MEASURE_MODE_EXACTLY?(t.lines||(t.lines=layoutText(t,o,i)),{height:linesHeight(t)}):r===Yoga.MEASURE_MODE_AT_MOST?(t.lines||(t.lines=layoutText(t,o,i)),{height:linesHeight(t),width:Math.min(o,linesWidth(t))}):{};var measureText$1=R.curryN(6,measureText);const getRatio=R.ifElse(R.hasPath(["image","data"]),e=>e.image.width/e.image.height,R.always(1)),isHeightAuto=R.pathSatisfies(R.isNil,["box","height"]),SAFETY_HEIGHT=10,measureImage=(e,t,o,r,i,a)=>{const n=getRatio(t),s=getMargin(t),l=getPadding(e),d=isHeightAuto(e)?1/0:e.box.height-l.paddingTop-l.paddingBottom-s.marginTop-s.marginBottom-10;if(!t.image)return{width:0,height:0};if(r===Yoga.MEASURE_MODE_EXACTLY&&a===Yoga.MEASURE_MODE_UNDEFINED){const e=o/n;return{height:Math.min(d,e)}}if(a===Yoga.MEASURE_MODE_EXACTLY&&(r===Yoga.MEASURE_MODE_AT_MOST||r===Yoga.MEASURE_MODE_UNDEFINED))return{width:Math.min(i*n,o)};if(r===Yoga.MEASURE_MODE_EXACTLY&&a===Yoga.MEASURE_MODE_AT_MOST){const e=o/n;return{height:Math.min(i,d,e)}}return r===Yoga.MEASURE_MODE_AT_MOST&&a===Yoga.MEASURE_MODE_AT_MOST?n>1?{width:o,height:Math.min(o/n,i)}:{width:Math.min(i*n,o),height:i}:{height:i,width:o}};var measureImage$1=R.curryN(6,measureImage);const SAFETY_HEIGHT$1=10,getMax=R.reduce(R.max,-1/0),measureCtx=()=>{const e={},t=[],o=()=>e,r=(e,o)=>t.push([e,o]),i=R.compose(o,r),a=(t,o,i,a)=>(r(t,o),r(t+i,o),r(t,o+a),r(t+i,o+a),e),n=(t,o,i,a)=>(r(t-i,o-(a=a||i)),r(t+i,o-a),r(t+i,o+a),r(t-i,o+a),e);return e.rect=a,e.moveTo=i,e.lineTo=i,e.circle=n,e.polygon=((...e)=>(t.push(...e),o())),e.ellipse=n,e.roundedRect=a,e.text=o,e.path=o,e.lineWidth=o,e.bezierCurveTo=o,e.quadraticCurveTo=o,e.scale=o,e.rotate=o,e.translate=o,e.dash=o,e.clip=o,e.save=o,e.fill=o,e.font=o,e.stroke=o,e.lineCap=o,e.opacity=o,e.restore=o,e.lineJoin=o,e.fontSize=o,e.fillColor=o,e.miterLimit=o,e.strokeColor=o,e.fillOpacity=o,e.strokeOpacity=o,e.linearGradient=o,e.radialGradient=o,e.getWidth=(()=>R.compose(getMax,R.pluck(0))(t)),e.getHeight=(()=>R.compose(getMax,R.pluck(1))(t)),e},measureCanvas=(e,t)=>{const o=getMargin(t),r=getPadding(e),i=isHeightAuto(e)?1/0:e.box.height-r.paddingTop-r.paddingBottom-o.marginTop-o.marginBottom-10,a=measureCtx();t.props.paint(a);const n=a.getWidth();return{height:Math.min(i,a.getHeight()),width:n}};var measureCanvas$1=R.curryN(6,measureCanvas);const YOGA_NODE="_yogaNode",YOGA_CONFIG=Yoga.Config.create();YOGA_CONFIG.setPointScaleFactor(0);const setNodeHeight=e=>R.ifElse(isPage,setHeight(e.box.height),setHeight(e.box.height||e.style.height)),setYogaValues=R.tap(e=>{R.compose(setNodeHeight(e),setWidth(e.style.width),setMinWidth(e.style.minWidth),setMaxWidth(e.style.maxWidth),setMinHeight(e.style.minHeight),setMaxHeight(e.style.maxHeight),setMarginTop(e.style.marginTop),setMarginRight(e.style.marginRight),setMarginBottom(e.style.marginBottom),setMarginLeft(e.style.marginLeft),setPaddingTop(e.style.paddingTop),setPaddingRight(e.style.paddingRight),setPaddingBottom(e.style.paddingBottom),setPaddingLeft(e.style.paddingLeft),setPositionType(e.style.position),setPositionTop(e.style.top),setPositionRight(e.style.right),setPositionBottom(e.style.bottom),setPositionLeft(e.style.left),setBorderTop(e.style.borderTopWidth),setBorderRight(e.style.borderRightWidth),setBorderBottom(e.style.borderBottomWidth),setBorderLeft(e.style.borderLeftWidth),setDisplay(e.style.display),setFlexDirection(e.style.flexDirection),setAlignSelf(e.style.alignSelf),setAlignContent(e.style.alignContent),setJustifyContent(e.style.justifyContent),setFlexWrap(e.style.flexWrap),setOverflow(e.style.overflow),setAspectRatio(e.style.aspectRatio),setFlex(e.style.flex),setFlexBasis(e.style.flexBasis),setFlexGrow(e.style.flexGrow),setFlexShrink(e.style.flexShrink))(e)}),insertYogaNodes=e=>R.tap(t=>e.insertChild(t._yogaNode,e.getChildCount())),setMeasureFunc=e=>t=>{const o=t._yogaNode;return isText(t)&&o.setMeasureFunc(measureText$1(e,t)),isImage(t)&&o.setMeasureFunc(measureImage$1(e,t)),isCanvas(t)&&o.setMeasureFunc(measureCanvas$1(e,t)),t},isNotText=R.complement(isText),isNotNote=R.complement(isNote),isLayoutElement=R.both(isNotText,isNotNote),isNotTextInstance=R.complement(isTextInstance),createYogaNodes=e=>t=>{const o=Yoga.Node.createWithConfig(YOGA_CONFIG);return R.compose(setMeasureFunc(e),R.when(isLayoutElement,R.evolve({children:R.map(R.compose(insertYogaNodes(o),createYogaNodes(e)))})),setYogaValues,R.assoc(YOGA_NODE,o))(t)},calculateLayout=R.tap(e=>e._yogaNode.calculateLayout()),persistDimensions=e=>R.evolve({children:R.map(R.when(isNotTextInstance,persistDimensions)),box:R.always(R.mergeAll([getPadding(e),getMargin(e),getBorderWidth(e),getPosition(e),getDimension(e)]))})(e),destroyYogaNodes=e=>R.compose(R.dissoc(YOGA_NODE),R.tap(e=>Yoga.Node.destroy(e._yogaNode)),R.evolve({children:R.map(R.when(isLayoutElement,destroyYogaNodes))}))(e),resolvePageDimensions=e=>R.ifElse(R.isNil,R.always(null),R.compose(destroyYogaNodes,persistDimensions,calculateLayout,createYogaNodes(e)))(e),resolveDimensions=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageDimensions)}))}),shouldLayoutText=e=>isText(e)&&!e.lines,resolveTextLayout=e=>R.compose(R.evolve({children:R.map(resolveTextLayout)}),R.when(shouldLayoutText,R.compose(R.converge(R.assoc("lines"),[R.converge(layoutText,[R.identity,R.path(["box","width"]),R.path(["box","height"])]),R.identity]))))(e),getInheritStyles=R.compose(R.pick(INHERITED_PROPERTIES),R.propOr({},"style")),mergeStyles$1=e=>R.evolve({style:R.merge(e)}),resolveInheritance=e=>{const t=getInheritStyles(e);return R.evolve({children:R.map(R.compose(resolveInheritance,mergeStyles$1(t)))})(e)},removeMargins=R.compose(setMargin(0),R.dissocPath(["style","margin"]),R.dissocPath(["style","marginTop"]),R.dissocPath(["style","marginRight"]),R.dissocPath(["style","marginBottom"]),R.dissocPath(["style","marginLeft"]),R.dissocPath(["style","marginHorizontal"]),R.dissocPath(["style","marginVertical"])),resolvePageMargins=R.evolve({children:R.map(R.evolve({children:R.map(removeMargins)}))}),getNodesHeight=e=>{let t=0,o=1/0;if(R.isEmpty(e))return 0;for(let r=0;r<e.length;r++){const i=e[r];o=Math.min(o,i.box.top),t=Math.max(t,i.box.top+i.box.height)}return t-o},getWrap=R.ifElse(R.anyPass([isNote,isImage,isCanvas]),R.always(!1),R.pathOr(!0,["props","wrap"])),getBreak=R.pathOr(!1,["props","break"]),getMinPresenceAhead=R.path(["props","minPresenceAhead"]),defaultPresenceAhead=e=>t=>Math.min(e.box.height,t),getPresenceAhead=(e,t)=>{let o=0;for(let r=0;r<e.length;r++){const i=e[r];if(!i.box)continue;const a=t>i.box.top,n=i.props.presenceAhead||defaultPresenceAhead(i);i&&a&&(o+=n(t-i.box.top))}return o},shouldBreak=(e,t,o)=>{const r=getMinPresenceAhead(e),i=getPresenceAhead(t,o),a=getNodesHeight(t),n=o<e.box.top+e.box.height,s=getWrap(e);return getBreak(e)||!s&&n||r<a&&i<r},getPaddingBottom=R.pathOr(0,["style","paddingBottom"]),getContentArea=e=>{const t=getPaddingBottom(e);return R.path(["style","height"],e)-t},getHeight=R.path(["box","height"]),getTop$1=R.pathOr(0,["box","top"]),getChildren=R.propOr([],"children"),setChildren=R.assoc("children"),setHeight$1=R.assocPath(["box","height"]),setBreak=R.assocPath(["props","break"]),breakChildren=(e,t)=>{const o=getChildren(t);let r=null,i=[];const a=[];for(let t=0;t<o.length;t++){const n=o[t],s=getTop$1(n),l=getHeight(n),d=o.slice(t+1);if(shouldBreak(n,d,e)){r=s,i=R.compose(R.prepend(setBreak(!1,n)),R.slice(t+1,1/0))(o);break}const[c,g,h]=breakChildren(e,n);if(!R.isNil(h)){r=s+h,a.push(R.compose(setChildren(c),setHeight$1(Math.ceil(r/e)*e-s))(n)),i=R.compose(R.prepend(R.compose(setChildren(g),setHeight$1(n.box.height-l))(n)),R.slice(t+1,1/0))(o);break}a.push(setChildren(c,n))}return[a,i,r]},breakNode=e=>t=>{const[o,r,i]=breakChildren(e,t);return R.isNil(i)?[t]:[R.compose(setChildren(o),setHeight$1(Math.ceil(i/e)*e))(t),R.compose(setChildren(r),setHeight$1(t.box.height-i))(t)]},breakPage=e=>{const t=[],o=getContentArea(e);let r=breakNode(o)(e),i=r[0],a=r[1];for(t.push(i);a;)i=(r=R.compose(breakNode(o),resolvePageDimensions,setHeight$1(null))(a))[0],a=r[1],t.push(i);return t},resolvePageBreaks=R.evolve({children:R.map(R.evolve({children:R.compose(R.flatten,R.map(breakPage))}))}),getTop$2=R.pathOr(0,["box","top"]),getHeight$1=R.path(["box","height"]),getChildren$1=R.propOr([],"children"),isElementOutside=R.useWith(R.lte,[R.identity,getTop$2]),splitNodes=(e,t)=>{const o=[],r=[];for(let i=0;i<t.length;i++){const a=t[i],[n,s]=splitNode(e,a);n&&o.push(n),s&&r.push(s)}return[o,r]},splitChildren=(e,t)=>{const o=getChildren$1(t),r=e-getTop$2(t);return splitNodes(r,o)},splitNode=R.curryN(2,(e,t)=>{if(!t)return[null,null];const o=getTop$2(t),r=e<o+getHeight$1(t);if(isElementOutside(e,t)){return[null,R.evolve({box:{top:R.subtract(R.__,e)}})(t),!1]}if(r){const[i,a]=splitChildren(e,t);return[R.evolve({children:R.always(i),style:{borderBottomLeftRadius:R.always(0),borderBottomRightRadius:R.always(0)},box:{height:R.when(R.always(r),R.always(e-o))}})(t),R.evolve({children:R.always(a),style:{borderTopLeftRadius:R.always(0),borderTopRightRadius:R.always(0)},box:{top:R.always(0),height:R.subtract(R.__,e-o)}})(t)]}return[t,null,!1]}),getPaddingBottom$1=R.pathOr(0,["style","paddingBottom"]),getWrappingArea=e=>{const t=getPaddingBottom$1(e);return R.path(["style","height"],e)-t},splitPage=e=>{if(!e)return[];const t=getWrappingArea(e);let o=splitNode(t,e);const r=[o[0]];let i=o[1];for(;null!==i;)o=splitNode(t,i),r.push(o[0]),i=o[1];return r},resolvePageSplitting=R.evolve({children:R.map(R.evolve({children:R.compose(R.flatten,R.map(splitPage))}))}),restorePageSize=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageSize("box"))}))}),resolvePageWrapping=R.compose(restorePageSize,resolvePageSplitting,resolvePageBreaks),getNodeText=e=>R.cond([[R.is(String),R.identity],[isTextInstance,R.prop("value")],[R.T,R.compose(getNodesText,R.propOr([],"children"))]])(e),getNodesText=R.compose(R.join(""),R.map(getNodeText)),wrapTextInstance=e=>[{type:"TEXT_INSTANCE",value:e}],resolveNoteChildren=e=>R.ifElse(isNote,R.evolve({children:R.compose(wrapTextInstance,getNodesText)}),R.evolve({children:R.map(resolveNoteChildren)}))(e),resolvePageHorizontalPadding=e=>t=>{const o=matchPercent(t);return o?o.percent*e.width:t},resolvePageVerticalPadding=e=>t=>{const o=matchPercent(t);return o?o.percent*e.height:t},resolvePagePaddings=e=>R.evolve({style:R.evolve({paddingLeft:resolvePageHorizontalPadding(e.box),paddingRight:resolvePageHorizontalPadding(e.box),paddingTop:resolvePageVerticalPadding(e.box),paddingBottom:resolvePageVerticalPadding(e.box)})})(e);var resolvePagePaddings$1=R.evolve({children:R.map(R.evolve({children:R.map(resolvePagePaddings)}))});const resolveRadius=e=>t=>{const o=matchPercent(t);return o?o.percent*Math.min(e.width,e.height):t},resolvePercentRadius=e=>R.evolve({children:R.map(resolvePercentRadius),style:R.evolve({borderTopLeftRadius:resolveRadius(e.box),borderTopRightRadius:resolveRadius(e.box),borderBottomRightRadius:resolveRadius(e.box),borderBottomLeftRadius:resolveRadius(e.box)})})(e),transformHeight=e=>t=>{const o=matchPercent(t);return o?o.percent*e:t},getPageArea=e=>{return R.path(["style","height"],e)-R.pathOr(0,["style","paddingTop"],e)-R.pathOr(0,["style","paddingBottom"],e)},hasHeight=R.hasPath(["style","height"]),resolveNodePercentHeight=e=>t=>{if(hasHeight(e)){const o=getPageArea(e);return R.evolve({style:{height:transformHeight(o)}})(t)}return t},resolvePagePercentHeight=e=>R.evolve({children:R.map(resolveNodePercentHeight(e))})(e),resolvePercentHeight=R.evolve({children:R.map(R.evolve({children:R.map(resolvePagePercentHeight)}))}),isLink=R.propEq("type",LINK),hasRenderProp=R.hasPath(["props","render"]),hasTextInstanceChilds=R.compose(R.all(isTextInstance),R.propOr([],"children")),resolveLinkSubstitution=e=>R.evolve({children:R.map(R.ifElse(R.both(isLink,R.either(hasRenderProp,hasTextInstanceChilds)),R.assoc("type",TEXT),resolveLinkSubstitution))})(e),resolveAbsoluteCoordinates=e=>{const t=R.pathOr(0,["box","top"],e),o=R.pathOr(0,["box","left"],e);return R.evolve({children:R.map(R.compose(resolveAbsoluteCoordinates,R.evolve({box:R.evolve({top:R.add(t),bottom:R.add(t),left:R.add(o),right:R.add(o)}),origin:R.evolve({top:R.add(t),left:R.add(o)})})))})(e)},asyncCompose=(...e)=>async t=>{for(const o of R.reverse(e))t=await o(t);return t},startTimer=e=>R.tap(()=>console.time(e)),endTimer=e=>R.tap(()=>console.timeEnd(e)),resolvePageSizeStyle=resolvePageSizes("style"),layout=asyncCompose(resolveAbsoluteCoordinates,resolveRulers,resolveOrigin,endTimer("resolvePageBreaks"),resolvePageWrapping,startTimer("resolvePageBreaks"),resolveTextLayout,resolvePercentRadius,resolveZIndex,resolveDimensions,resolveAssets,resolveInheritance,resolvePercentHeight,resolvePagePaddings$1,resolveStyles$1,resolveNoteChildren,resolveLinkSubstitution,resolvePageMargins,resolvePageSizeStyle),save=e=>R.tap(()=>e.save()),restore=e=>R.tap(()=>e.restore()),renderText=(e,t)=>{const{top:o,left:r}=t.box,i=R.pathOr(0,["box","paddingTop"],t),a=R.pathOr(0,["box","paddingLeft"],t),n=t.lines[0]?t.lines[0].box.y:0;return e.save(),e.translate(r+a,o+i-n),PDFRenderer.render(e,[t.lines]),e.restore(),t};var renderText$1=R.curryN(2,renderText);const renderPage=(e,t)=>{const{width:o,height:r}=t.box;return e.addPage({size:[o,r],margin:0}),t};var renderPage$1=R.curryN(2,renderPage);const PROTOCOL_REGEXP=/^([a-z]+\:(\/\/)?)/i,getURL=e=>e?"string"!=typeof e||e.match(PROTOCOL_REGEXP)?e:`http://${e}`:"",getSource$1=R.compose(getURL,R.either(R.path(["props","src"]),R.path(["props","href"]))),renderLink=(e,t)=>{const{top:o,left:r,width:i,height:a}=t.box,n=getSource$1(t);return e.link(r,o,i,a,n),t};var renderLink$1=R.curryN(2,renderLink);const renderNote=(e,t)=>{const{top:o,left:r}=t.box,i=t.children[0]?t.children[0].value:"";return e.note(r,o,0,0,i),t};var renderNote$1=R.curryN(2,renderNote);const KAPPA=(Math.sqrt(2)-1)/3*4,clipNode=(e,t)=>{const{top:o,left:r,width:i,height:a}=t.box,{borderTopLeftRadius:n=0,borderTopRightRadius:s=0,borderBottomRightRadius:l=0,borderBottomLeftRadius:d=0}=t.style,c=Math.min(s,.5*i,.5*a),g=c*(1-KAPPA);e.moveTo(r+c,o),e.lineTo(r+i-c,o),e.bezierCurveTo(r+i-g,o,r+i,o+g,r+i,o+c);const h=Math.min(l,.5*i,.5*a),p=h*(1-KAPPA);e.lineTo(r+i,o+a-h),e.bezierCurveTo(r+i,o+a-p,r+i-p,o+a,r+i-h,o+a);const u=Math.min(d,.5*i,.5*a),R=u*(1-KAPPA);e.lineTo(r+u,o+a),e.bezierCurveTo(r+R,o+a,r,o+a-R,r,o+a-u);const m=Math.min(n,.5*i,.5*a),f=m*(1-KAPPA);return e.lineTo(r,o+m),e.bezierCurveTo(r,o+f,r+f,o,r+m,o),e.closePath(),e.clip(),t};var clipNode$1=R.curryN(2,clipNode);const isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),applyContainObjectFit=(e,t,o,r,i,a)=>{const n=e/t,s=o/r,l=matchPercent(i),d=matchPercent(a),c=l?l.percent:.5,g=d?d.percent:.5;if(n>s){const o=t,r=o*s,n=isNumeric(a)?a:0;return{width:r,height:o,xOffset:isNumeric(i)?i:(e-r)*c,yOffset:n}}{const o=e,r=o/s,n=isNumeric(i)?i:0;return{width:o,height:r,yOffset:isNumeric(a)?a:(t-r)*g,xOffset:n}}},applyNoneObjectFit=(e,t,o,r,i,a)=>{const n=o,s=r,l=matchPercent(i),d=matchPercent(a),c=l?l.percent:.5,g=d?d.percent:.5;return{width:n,height:s,xOffset:isNumeric(i)?i:(e-n)*c,yOffset:isNumeric(a)?a:(t-s)*g}},applyCoverObjectFit=(e,t,o,r,i,a)=>{const n=o/r,s=e/t,l=matchPercent(i),d=matchPercent(a),c=l?l.percent:.5,g=d?d.percent:.5;if(s>n){const o=e,r=o/n,s=isNumeric(i)?i:0;return{width:o,height:r,yOffset:isNumeric(a)?a:(t-r)*g,xOffset:s}}{const o=t*n;return{width:o,height:t,xOffset:isNumeric(i)?i:(e-o)*c,yOffset:isNumeric(a)?a:0}}},applyScaleDownObjectFit=(e,t,o,r,i,a)=>{const n=applyContainObjectFit(e,t,o,r,i,a),s=applyNoneObjectFit(e,t,o,r,i,a);return n.width<s.width?n:s},applyFillObjectFit=(e,t,o,r)=>({width:e,height:t,xOffset:matchPercent(o)?0:o||0,yOffset:matchPercent(r)?0:r||0}),resolveObjectFit=(e="fill",t,o,r,i,a,n)=>{switch(e){case"contain":return applyContainObjectFit(t,o,r,i,a,n);case"cover":return applyCoverObjectFit(t,o,r,i,a,n);case"none":return applyNoneObjectFit(t,o,r,i,a,n);case"scale-down":return applyScaleDownObjectFit(t,o,r,i,a,n);default:return applyFillObjectFit(t,o,a,n)}},drawImage=e=>t=>{const{left:o,top:r}=t.box,{opacity:i,objectPositionX:a,objectPositionY:n}=t.style,s=t.box.paddingLeft||0,l=t.box.paddingRight||0,d=t.box.paddingBottom||0,c=t.box.paddingLeft||0,{width:g,height:h,xOffset:p,yOffset:u}=resolveObjectFit(t.style.objectFit,t.box.width-c-l,t.box.height-s-d,t.image.width,t.image.height,a,n);return t.image.data&&(0!==g&&0!==h?e.fillOpacity(i||1).image(t.image.data,o+c+p,r+s+u,{width:g,height:h}):warning(!1,`Image with src '${t.props.src}' skipped due to invalid dimensions`)),t},renderImage=(e,t)=>(R.compose(restore(e),drawImage(e),clipNode$1(e),save(e))(t),t);var renderImage$1=R.curryN(2,renderImage);const availableMethods=["dash","clip","save","path","fill","font","text","rect","scale","moveTo","lineTo","stroke","rotate","circle","lineCap","opacity","ellipse","polygon","restore","lineJoin","fontSize","fillColor","lineWidth","translate","miterLimit","strokeColor","fillOpacity","roundedRect","strokeOpacity","bezierCurveTo","quadraticCurveTo","linearGradient","radialGradient"],painter=function(e){const t=availableMethods.reduce((o,r)=>({...o,[r]:(...o)=>(e[r](...o),t)}),{});return t},defaultsZero=R.pathOr(0),renderCanvas=(e,t)=>{const{top:o,left:r,width:i,height:a}=t.box,n=defaultsZero("paddingLeft",t.box),s=defaultsZero("paddingRight",t.box),l=defaultsZero("paddingTop",t.box),d=i-n-s,c=a-l-defaultsZero("paddingBottom",t.box);return warning(d&&c,"Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it."),e.save().translate(r+n,o+l),t.props.paint&&t.props.paint(painter(e),d,c),e.restore(),t};var renderCanvas$1=R.curryN(2,renderCanvas);const range=(e,t)=>Array.from({length:Math.ceil(e/t)},(e,o)=>o*t),matchPercentage=e=>{const t=matchPercent(e);return t?100/t.value:null},getVerticalSteps=e=>{const t=e.props.horizontalRulerSteps||e.props.rulerSteps||50;if("string"==typeof t){const o=matchPercentage(t);if(o){return(e.box.width-(hasVerticalRuler(e)?13:0))/o}throw new Error("Page: Invalid horizontal steps value")}return t},getHorizontalSteps=e=>{const t=e.props.verticalRulerSteps||e.props.rulerSteps||50;if("string"==typeof t){const o=matchPercentage(t);if(o){return(e.box.height-(hasVerticalRuler(e)?13:0))/o}throw new Error("Page: Invalid horizontal steps value")}return t},renderVerticalRuler=e=>t=>{const o=t.box.width,r=t.box.height,i=hasHorizontalRuler(t)?13:0,a=range(o,getVerticalSteps(t));return e.rect(i,0,o,13).fill("white").moveTo(i,13).lineTo(o,13).stroke("gray"),a.map(t=>{e.moveTo(i+t,0).lineTo(i+t,13).stroke("gray").fillColor("black").text(`${Math.round(t)}`,i+t+1,1),0!==t&&e.moveTo(i+t,13).lineTo(i+t,r).stroke("#ababab")}),t},renderHorizontalRuler=e=>t=>{const o=t.box.width,r=t.box.height,i=hasVerticalRuler(t)?13:0,a=range(r,getHorizontalSteps(t));return e.rect(0,i,13,r).fill("white").moveTo(13,hasHorizontalRuler(t)?13:0).lineTo(13,r).stroke("gray"),a.map(t=>{e.moveTo(0,i+t).lineTo(13,i+t).stroke("gray").fillColor("black").text(`${Math.round(t)}`,1,i+t+1),0!==t&&e.moveTo(13,i+t).lineTo(o,i+t).stroke("#ababab")}),t},renderRulers=(e,t)=>(e.save().lineWidth(.5).fontSize(6).opacity(1),R.compose(R.when(hasVerticalRuler,renderVerticalRuler(e)),R.when(hasHorizontalRuler,renderHorizontalRuler(e)))(t),e.restore(),t);var renderRulers$1=R.curryN(2,renderRulers);const getDocumentProp=e=>(t,o)=>R.pathOr(t,["children",0,"props",o],e),setPDFMetadata=e=>(t,o)=>{o&&(e.info[t]=o)},addMetadata=(e,t)=>{const o=getDocumentProp(t),r=setPDFMetadata(e),i=o(null,"title"),a=o(null,"author"),n=o(null,"subject"),s=o(null,"keywords"),l=o("react-pdf","creator"),d=o("react-pdf","producer");return r("Title",i),r("Author",a),r("Subject",n),r("Keywords",s),r("Creator",l),r("Producer",d),t};var addMetadata$1=R.curryN(2,addMetadata);const CONTENT_COLOR="#a1c6e7",PADDING_COLOR="#c4deb9",MARGIN_COLOR="#f8cca1",shouldDebug=R.pathEq(["props","debug"],!0),debugContent=(e,t)=>{const{left:o,top:r,width:i,height:a,paddingLeft:n,paddingTop:s,paddingRight:l,paddingBottom:d}=t.box;e.fillColor("#a1c6e7").opacity(.5).rect(o+n,r+s,i-n-l,a-s-d).fill()},debugPadding=(e,t)=>{const{left:o,top:r,width:i,height:a,paddingLeft:n,paddingTop:s,paddingRight:l,paddingBottom:d}=t.box;e.fillColor("#c4deb9").opacity(.5),e.rect(o+n,r,i-l-n,s).fill(),e.rect(o,r,n,a).fill(),e.rect(o+i-l,r,l,a).fill(),e.rect(o+n,r+a-d,i-l-n,d).fill()},debugMargin=(e,t)=>{const{left:o,top:r,width:i,height:a,marginLeft:n,marginTop:s,marginRight:l,marginBottom:d}=t.box;e.fillColor("#f8cca1").opacity(.5),e.rect(o,r-s,i,s).fill(),e.rect(o-n,r-s,n,a+s+d).fill(),e.rect(o+i,r-s,l,a+s+d).fill(),e.rect(o,r+a,i,d).fill()},debugText=(e,t)=>{const{left:o,top:r,width:i,height:a,marginLeft:n,marginTop:s,marginRight:l,marginBottom:d}=t.box,c=Math.round(i+n+l),g=Math.round(a+s+d);e.fontSize(4).opacity(1).fillColor("black").text(`${c} x ${g}`,o-n,Math.max(r-s-4,1))},debugOrigin=(e,t)=>{t.origin&&e.circle(t.origin.left,t.origin.top,3).fill("red").circle(t.origin.left,t.origin.top,5).stroke("red")},renderDebug=(e,t)=>shouldDebug(t)?(e.save(),debugContent(e,t),debugPadding(e,t),debugMargin(e,t),debugText(e,t),debugOrigin(e,t),e.restore(),t):t;var renderDebug$1=R.curryN(2,renderDebug);const KAPPA$1=(Math.sqrt(2)-1)/3*4,clipBorderTop=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderTopWidth:d,borderRightWidth:c,borderLeftWidth:g}=o;e.moveTo(n+i,a),e.lineTo(n+s-r,a);const h=r*(1-KAPPA$1);e.bezierCurveTo(n+s-h,a,n+s,a+h,n+s,a+r);const p=a+Math.max(d,r);e.lineTo(n+s,p),e.lineTo(n+s-c,p);const u=Math.max(r-c,0),R=Math.max(r-d,0),m=u*(1-KAPPA$1),f=R*(1-KAPPA$1);e.bezierCurveTo(n+s-c,a+d+f,n+s-c-m,a+d,n+s-c-u,a+d),e.lineTo(n+Math.max(i,g),a+d);const y=Math.max(i-g,0),b=Math.max(i-d,0),T=y*(1-KAPPA$1),v=b*(1-KAPPA$1),P=a+Math.max(d,i);e.bezierCurveTo(n+g+T,a+d,n+g,a+d+v,n+g,P),e.lineTo(n,P),e.lineTo(n,a+i);const E=i*(1-KAPPA$1);if(e.bezierCurveTo(n,a+E,n+E,a,n+i,a),e.closePath(),e.clip(),c){const t=-d/c;e.moveTo(n+s/2,t*(-s/2)+a),e.lineTo(n+s,a),e.lineTo(n,a),e.lineTo(n,a+l),e.closePath(),e.clip()}if(g){const t=-d/g;e.moveTo(n+s/2,t*(-s/2)+a),e.lineTo(n,a),e.lineTo(n+s,a),e.lineTo(n+s,a+l),e.closePath(),e.clip()}},fillBorderTop=(e,t,o,r,i)=>{const{top:a,left:n,width:s}=t,{borderTopColor:l,borderTopWidth:d,borderTopStyle:c,borderRightWidth:g,borderLeftWidth:h}=o,p=i*(1-KAPPA$1),u=r*(1-KAPPA$1);e.moveTo(n,a+Math.max(i,d)),e.bezierCurveTo(n,a+p,n+p,a,n+i,a),e.lineTo(n+s-r,a),e.bezierCurveTo(n+s-u,a,n+s,a+u,n+s,a+r),e.strokeColor(l),e.lineWidth(2*Math.max(g,d,h)),"dashed"===c?e.dash(2*d,{space:1.2*d}):"dotted"===c&&e.dash(d,{space:1.2*d}),e.stroke(),e.undash()},clipBorderRight=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderTopWidth:d,borderRightWidth:c,borderBottomWidth:g}=o;e.moveTo(n+s,a+r),e.lineTo(n+s,a+l-i);const h=i*(1-KAPPA$1);e.bezierCurveTo(n+s,a+l-h,n+s-h,a+l,n+s-i,a+l);const p=n+s-Math.max(c,i);e.lineTo(p,a+l),e.lineTo(p,a+l-g);const u=Math.max(i-c,0),R=Math.max(i-g,0),m=u*(1-KAPPA$1),f=R*(1-KAPPA$1);e.bezierCurveTo(n+s-c-m,a+l-g,n+s-c,a+l-g-f,n+s-c,a+l-Math.max(i,g)),e.lineTo(n+s-c,a+Math.max(r,d));const y=Math.max(r-c,0),b=Math.max(r-d,0),T=y*(1-KAPPA$1),v=b*(1-KAPPA$1),P=n+s-Math.max(r,c);e.bezierCurveTo(n+s-c,a+d+v,n+s-c-T,a+d,P,a+d),e.lineTo(P,a),e.lineTo(n+s-r,a);const E=r*(1-KAPPA$1);if(e.bezierCurveTo(n+s-E,a,n+s,a+E,n+s,a+r),e.closePath(),e.clip(),d){const t=-d/c;e.moveTo(n+s/2,t*(-s/2)+a),e.lineTo(n+s,a),e.lineTo(n+s,a+l),e.lineTo(n,a+l),e.closePath(),e.clip()}if(g){const t=g/c;e.moveTo(n+s/2,t*(-s/2)+a+l),e.lineTo(n+s,a+l),e.lineTo(n+s,a),e.lineTo(n,a),e.closePath(),e.clip()}},fillBorderRight=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderRightColor:d,borderRightStyle:c,borderRightWidth:g,borderTopWidth:h,borderBottomWidth:p}=o,u=i*(1-KAPPA$1),R=r*(1-KAPPA$1);e.moveTo(n+s-r,a),e.bezierCurveTo(n+s-R,a,n+s,a+R,n+s,a+r),e.lineTo(n+s,a+l-i),e.bezierCurveTo(n+s,a+l-u,n+s-u,a+l,n+s-i,a+l),e.strokeColor(d),e.lineWidth(2*Math.max(g,h,p)),"dashed"===c?e.dash(2*g,{space:1.2*g}):"dotted"===c&&e.dash(g,{space:1.2*g}),e.stroke(),e.undash()},clipBorderBottom=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderBottomWidth:d,borderRightWidth:c,borderLeftWidth:g}=o;e.moveTo(n+s-i,a+l),e.lineTo(n+r,a+l);const h=r*(1-KAPPA$1);e.bezierCurveTo(n+h,a+l,n,a+l-h,n,a+l-r);const p=a+l-Math.max(d,r);e.lineTo(n,p),e.lineTo(n+g,p);const u=Math.max(r-g,0),R=Math.max(r-d,0),m=u*(1-KAPPA$1),f=R*(1-KAPPA$1);e.bezierCurveTo(n+g,a+l-d-f,n+g+m,a+l-d,n+g+u,a+l-d),e.lineTo(n+s-Math.max(i,c),a+l-d);const y=Math.max(i-c,0),b=Math.max(i-d,0),T=y*(1-KAPPA$1),v=b*(1-KAPPA$1),P=a+l-Math.max(d,i);e.bezierCurveTo(n+s-c-T,a+l-d,n+s-c,a+l-d-v,n+s-c,P),e.lineTo(n+s,P),e.lineTo(n+s,a+l-i);const E=i*(1-KAPPA$1);if(e.bezierCurveTo(n+s,a+l-E,n+s-E,a+l,n+s-i,a+l),e.closePath(),e.clip(),c){const t=d/c;e.moveTo(n+s/2,t*(-s/2)+a+l),e.lineTo(n+s,a+l),e.lineTo(n,a+l),e.lineTo(n,a),e.closePath(),e.clip()}if(g){const t=-d/g;e.moveTo(n+s/2,t*(s/2)+a+l),e.lineTo(n,a+l),e.lineTo(n+s,a+l),e.lineTo(n+s,a),e.closePath(),e.clip()}},fillBorderBottom=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderBottomColor:d,borderBottomStyle:c,borderBottomWidth:g,borderRightWidth:h,borderLeftWidth:p}=o,u=r*(1-KAPPA$1),R=i*(1-KAPPA$1);e.moveTo(n+s,a+l-i),e.bezierCurveTo(n+s,a+l-R,n+s-R,a+l,n+s-i,a+l),e.lineTo(n+r,a+l),e.bezierCurveTo(n+u,a+l,n,a+l-u,n,a+l-r),e.strokeColor(d),e.lineWidth(2*Math.max(g,h,p)),"dashed"===c?e.dash(2*g,{space:1.2*g}):"dotted"===c&&e.dash(g,{space:1.2*g}),e.stroke(),e.undash()},clipBorderLeft=(e,t,o,r,i)=>{const{top:a,left:n,width:s,height:l}=t,{borderTopWidth:d,borderLeftWidth:c,borderBottomWidth:g}=o;e.moveTo(n,a+l-r),e.lineTo(n,a+i);const h=i*(1-KAPPA$1);e.bezierCurveTo(n,a+h,n+h,a,n+i,a);const p=n+Math.max(c,i);e.lineTo(p,a),e.lineTo(p,a+d);const u=Math.max(i-c,0),R=Math.max(i-d,0),m=u*(1-KAPPA$1),f=R*(1-KAPPA$1);e.bezierCurveTo(n+c+m,a+d,n+c,a+d+f,n+c,a+Math.max(i,d)),e.lineTo(n+c,a+l-Math.max(r,g));const y=Math.max(r-c,0),b=Math.max(r-g,0),T=y*(1-KAPPA$1),v=b*(1-KAPPA$1),P=n+Math.max(r,c);e.bezierCurveTo(n+c,a+l-g-v,n+c+T,a+l-g,P,a+l-g),e.lineTo(P,a+l),e.lineTo(n+r,a+l);const E=r*(1-KAPPA$1);if(e.bezierCurveTo(n+E,a+l,n,a+l-E,n,a+l-r),e.closePath(),e.clip(),g){const t=-g/c;e.moveTo(n+s/2,t*(s/2)+a+l),e.lineTo(n,a+l),e.lineTo(n,a),e.lineTo(n+s,a),e.closePath(),e.clip()}if(g){const t=-d/c;e.moveTo(n+s/2,t*(-s/2)+a),e.lineTo(n,a),e.lineTo(n,a+l),e.lineTo(n+s,a+l),e.closePath(),e.clip()}},fillBorderLeft=(e,t,o,r,i)=>{const{top:a,left:n,height:s}=t,{borderLeftColor:l,borderLeftStyle:d,borderLeftWidth:c,borderTopWidth:g,borderBottomWidth:h}=o,p=r*(1-KAPPA$1),u=i*(1-KAPPA$1);e.moveTo(n+r,a+s),e.bezierCurveTo(n+p,a+s,n,a+s-p,n,a+s-r),e.lineTo(n,a+i),e.bezierCurveTo(n,a+u,n+u,a,n+i,a),e.strokeColor(l),e.lineWidth(2*Math.max(c,g,h)),"dashed"===d?e.dash(2*c,{space:1.2*c}):"dotted"===d&&e.dash(c,{space:1.2*c}),e.stroke(),e.undash()},shouldRenderBorders=e=>e.box&&(e.box.borderTopWidth||e.box.borderRightWidth||e.box.borderBottomWidth||e.box.borderLeftWidth),renderBorders=(e,t)=>{if(!shouldRenderBorders(t))return t;const{width:o,height:r,borderTopWidth:i,borderLeftWidth:a,borderRightWidth:n,borderBottomWidth:s}=t.box,{opacity:l,borderTopLeftRadius:d=0,borderTopRightRadius:c=0,borderBottomLeftRadius:g=0,borderBottomRightRadius:h=0,borderTopColor:p="black",borderTopStyle:u="solid",borderLeftColor:R="black",borderLeftStyle:m="solid",borderRightColor:f="black",borderRightStyle:y="solid",borderBottomColor:b="black",borderBottomStyle:T="solid"}=t.style,v={borderTopColor:p,borderTopWidth:i,borderTopStyle:u,borderLeftColor:R,borderLeftWidth:a,borderLeftStyle:m,borderRightColor:f,borderRightWidth:n,borderRightStyle:y,borderBottomColor:b,borderBottomWidth:s,borderBottomStyle:T,borderTopLeftRadius:d,borderTopRightRadius:c,borderBottomLeftRadius:g,borderBottomRightRadius:h},P=Math.min(c,.5*o,.5*r),E=Math.min(d,.5*o,.5*r),x=Math.min(h,.5*o,.5*r),S=Math.min(g,.5*o,.5*r);return e.save(),e.strokeOpacity(l),i&&(e.save(),clipBorderTop(e,t.box,v,P,E),fillBorderTop(e,t.box,v,P,E),e.restore()),n&&(e.save(),clipBorderRight(e,t.box,v,P,x),fillBorderRight(e,t.box,v,P,x),e.restore()),s&&(e.save(),clipBorderBottom(e,t.box,v,S,x),fillBorderBottom(e,t.box,v,S,x),e.restore()),a&&(e.save(),clipBorderLeft(e,t.box,v,S,E),fillBorderLeft(e,t.box,v,S,E),e.restore()),e.restore(),t};var renderBorders$1=R.curryN(2,renderBorders);const drawBackground=e=>t=>{if(t.box&&t.style.backgroundColor){const{top:o,left:r,width:i,height:a}=t.box;e.fillOpacity(t.style.opacity||1).fillColor(t.style.backgroundColor).rect(r,o,i,a).fill()}return t},shouldRenderBackground=R.hasPath(["style","backgroundColor"]),renderBackground=(e,t)=>(R.when(shouldRenderBackground,R.compose(restore(e),drawBackground(e),clipNode$1(e),save(e)))(t),t);var renderBackground$1=R.curryN(2,renderBackground);const getRotation=e=>{const t=/rotate\((-?\d+.?\d+)(.+)\)/g.exec(e);if(t&&t[1]&&t[2]){const e=t[1];return"rad"===t[2]?180*e/Math.PI:e}return 0},getTranslateX=e=>{const t=/translateX\((-?\d+\.?d*)\)/g.exec(e),o=/translate\((-?\d+\.?d*).*,\s*(-?\d+\.?d*).*\)/g.exec(e);return t&&t[1]?t[1]:o&&o[1]?o[1]:0},getTranslateY=e=>{const t=/translateY\((-?\d+\.?\d*)\)/g.exec(e),o=/translate\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:o&&o[2]?o[2]:0},getScaleX=e=>{const t=/scaleX\((-?\d+\.?\d*)\)/g.exec(e),o=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:o&&o[1]?o[1]:1},getScaleY=e=>{const t=/scaleY\((-?\d+\.?\d*)\)/g.exec(e),o=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:o&&o[2]?o[2]:1},getMatrix=e=>{const t=/matrix\(([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)\)/g.exec(e);return t?t.slice(1,7):null},applySingleTransformation=(e,t,o)=>{/rotate/g.test(t)?e.rotate(getRotation(t),{origin:o}):/scaleX/g.test(t)?e.scale(getScaleX(t),1,{origin:o}):/scaleY/g.test(t)?e.scale(1,getScaleY(t),{origin:o}):/scale/g.test(t)?e.scale(getScaleX(t),getScaleY(t),{origin:o}):/translateX/g.test(t)?e.translate(getTranslateX(t),1,{origin:o}):/translateY/g.test(t)?e.translate(1,getTranslateY(t),{origin:o}):/translate/g.test(t)?e.translate(getTranslateX(t),getTranslateY(t),{origin:o}):/matrix/g.test(t)&&e.transform(...getMatrix(t))},applyTransformations=(e,t)=>{if(!t.origin)return t;let o;const r=/[a-zA-Z]+\([^)]+\)/g,i=[t.origin.left,t.origin.top],a=t.style&&t.style.transform||"";for(;null!=(o=r.exec(a));)applySingleTransformation(e,o[0],i);return t};var applyTransformations$1=R.curryN(2,applyTransformations);const isNotText$1=R.complement(isText),renderNode=e=>t=>{const o=R.tap(R.compose(R.forEach(renderNode(e)),R.pathOr([],["children"])));return R.compose(restore(e),renderDebug$1(e),R.when(isNotText$1,o),R.cond([[isText,renderText$1(e)],[isLink,renderLink$1(e)],[isNote,renderNote$1(e)],[isImage,renderImage$1(e)],[isCanvas,renderCanvas$1(e)],[R.T,R.identity]]),renderBorders$1(e),renderBackground$1(e),applyTransformations$1(e),save(e),R.when(isPage,renderPage$1(e)))(t)},renderDocument=e=>R.compose(R.forEach(R.compose(renderRulers$1(e),renderNode(e))),R.pathOr([],["children"])),renderRoot=e=>R.compose(R.forEach(renderDocument(e)),R.pathOr([],["children"])),render=(e,t)=>(addMetadata$1(e)(t),renderRoot(e)(t),e.end(),Font$1.reset(),e),create=e=>e,absoluteFillObject={position:"absolute",top:0,left:0,bottom:0,right:0};var StyleSheet={hairlineWidth:1,create:create,flatten:flatten,absoluteFillObject:absoluteFillObject},version="1.6.0";const View=VIEW,Text=TEXT,Link=LINK,Page=PAGE,Note=NOTE,Image=IMAGE,Document=DOCUMENT,pdf=e=>{let t=!0;const o={type:"ROOT",children:[]},r=createRenderer(function(){t=!0}),i=r.createContainer(o);e&&n(e);const a=async()=>{const e=new PDFDocument__default({autoFirstPage:!1});console.time("layout");const r=await layout(o);console.timeEnd("layout");const i=render(e,r);return t=!1,i};function n(e){r.updateContainer(e,i,null)}return{layout:async()=>layout(o),isDirty:function(){return t},container:o,updateContainer:n,renderWithContext:async e=>{const r=await layout(o),i=render(e,r);return t=!1,i},toBlob:async function(){const e=(await a()).pipe(BlobStream());return new Promise((t,o)=>{e.on("finish",()=>{try{const r=e.toBlob("application/pdf");t(r)}catch(e){o(e)}}),e.on("error",o)})},toString:toString}},renderToStream=async function(e){const t=pdf(e),o=await t.toBuffer();return t.container.finish(),o},renderToFile=async function(e,t,o){const r=await renderToStream(e),i=fs.createWriteStream(t);return r.pipe(i),new Promise((e,a)=>{i.on("finish",()=>{o&&o(r,t),e(r)}),i.on("error",a)})},throwEnvironmentError=e=>{throw new Error(`${e} is a web specific API. Or you're either using this component on Node, or your bundler is not loading react-pdf from the appropiate web build.`)},PDFViewer=()=>{throwEnvironmentError("PDFViewer")},PDFDownloadLink=()=>{throwEnvironmentError("PDFDownloadLink")},BlobProvider=()=>{throwEnvironmentError("BlobProvider")},render$1=renderToFile;var node={pdf:pdf,View:View,Text:Text,Link:Link,Page:Page,Font:Font$1,Note:Note,Image:Image,version:version,Document:Document,StyleSheet:StyleSheet,PDFViewer:PDFViewer,BlobProvider:BlobProvider,PDFDownloadLink:PDFDownloadLink,renderToStream:renderToStream,renderToFile:renderToFile,render:render$1};exports.renderToStream=renderToStream,exports.renderToFile=renderToFile,exports.PDFViewer=PDFViewer,exports.PDFDownloadLink=PDFDownloadLink,exports.BlobProvider=BlobProvider,exports.render=render$1,exports.default=node,exports.pdf=pdf,exports.View=View,exports.Text=Text,exports.Link=Link,exports.Page=Page,exports.Font=Font$1,exports.Note=Note,exports.Image=Image,exports.version=version,exports.Document=Document,exports.StyleSheet=StyleSheet;
//# sourceMappingURL=react-pdf.cjs.min.js.map
