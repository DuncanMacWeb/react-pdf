"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var _inheritsLoose=_interopDefault(require("@babel/runtime/helpers/inheritsLoose")),_objectWithoutPropertiesLoose=_interopDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),_extends=_interopDefault(require("@babel/runtime/helpers/extends")),React=_interopDefault(require("react")),_regeneratorRuntime=_interopDefault(require("@babel/runtime/regenerator")),_asyncToGenerator=_interopDefault(require("@babel/runtime/helpers/asyncToGenerator")),BlobStream=_interopDefault(require("blob-stream")),PDFDocument=require("@react-pdf/pdfkit"),PDFDocument__default=_interopDefault(PDFDocument),ReactFiberReconciler=_interopDefault(require("react-reconciler")),R=require("ramda");require("is-url");var emojiSource,hyphenationCallback,fontkit=_interopDefault(require("@react-pdf/fontkit")),fetch=_interopDefault(require("cross-fetch")),PNG=_interopDefault(require("@react-pdf/png-js")),emojiRegex=_interopDefault(require("emoji-regex")),matchMedia=_interopDefault(require("media-engine")),Yoga=_interopDefault(require("yoga-layout-prebuilt")),layoutEngine=_interopDefault(require("@react-pdf/textkit/layout")),linebreaker=_interopDefault(require("@react-pdf/textkit/engines/linebreaker")),justification=_interopDefault(require("@react-pdf/textkit/engines/justification")),textDecoration=_interopDefault(require("@react-pdf/textkit/engines/textDecoration")),scriptItemizer=_interopDefault(require("@react-pdf/textkit/engines/scriptItemizer")),wordHyphenation=_interopDefault(require("@react-pdf/textkit/engines/wordHyphenation")),_createClass=_interopDefault(require("@babel/runtime/helpers/createClass")),AttributedString=_interopDefault(require("@react-pdf/textkit/attributedString")),PDFRenderer=_interopDefault(require("@react-pdf/textkit/renderers/pdf")),propsEqual=function e(t,r){var o=Object.keys(t),n=Object.keys(r);if(o.length!==n.length)return!1;for(var i=0;i<o.length;i++){var a=o[i];if("render"!==a){if("children"!==a&&t[a]!==r[a]){if("object"==typeof t[a]&&"object"==typeof r[a]&&e(t[a],r[a]))continue;return!1}if("children"===a&&("string"==typeof t[a]||"string"==typeof r[a]))return t[a]===r[a]}else if(!t[a]!=!r[a])return!1}return!0},emptyObject={},createRenderer=function(e){return ReactFiberReconciler({supportsMutation:!0,appendInitialChild:function(t,r){t.children.push(r),e()},createInstance:function(e,t){var r=t.style;t.children;return{type:e,box:{},style:r||{},props:_objectWithoutPropertiesLoose(t,["style","children"])||{},children:[]}},createTextInstance:function(e,t){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,t,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},prepareUpdate:function(e,t,r,o){return!propsEqual(r,o)},resetAfterCommit:function(e,t,r){},resetTextContent:function(e){},getRootHostContext:function(){return emptyObject},getChildHostContext:function(){return emptyObject},shouldSetTextContent:function(e,t){return!1},now:Date.now,useSyncScheduling:!0,appendChild:function(t,r){t.children.push(r),e()},appendChildToContainer:function(t,r){t.children.push(r),e()},insertBefore:function(t,r,o){var n=t.children.indexOf(o);-1!==n&&r&&t.children.splice(n,0,r),e()},removeChild:function(t,r){var o=t.children.indexOf(r);-1!==o&&t.children.splice(o,1),e()},removeChildFromContainer:function(t,r){var o=t.children.indexOf(r);-1!==o&&t.children.splice(o,1),e()},commitTextUpdate:function(t,r,o){t.value=o,e()},commitUpdate:function(t,r,o,n,i){var a=i.style,s=_objectWithoutPropertiesLoose(i,["style"]);t.props=s,t.style=a,e()}})},VIEW="VIEW",TEXT="TEXT",LINK="LINK",PAGE="PAGE",NOTE="NOTE",IMAGE="IMAGE",DOCUMENT="DOCUMENT",CANVAS="CANVAS",TEXT_INSTANCE="TEXT_INSTANCE",DPI=72,FONT_WEIGHTS={thin:100,hairline:100,ultralight:200,extralight:200,light:300,normal:400,medium:500,semibold:600,demibold:600,bold:700,ultrabold:800,extrabold:800,heavy:900,black:900},PAGE_SIZES={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]},PORTRAIT="portrait",LANDSCAPE="landscape",INHERITED_PROPERTIES=["color","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","opacity","textDecoration","lineHeight","textAlign","visibility","wordSpacing"],RULER_WIDTH=13,RULER_COLOR="white",RULER_FONT_SIZE=6,DEFAULT_RULER_STEPS=50,LINE_WIDTH=.5,LINE_COLOR="gray",GRID_COLOR="#ababab",BOX_MODEL_REGEX=/\d+(px|in|mm|cm|pt|%|vw|vh)?/g,OBJECT_POSITION_REGEX=/\d+(px|in|mm|cm|pt|%|vw|vh)?/g,BORDER_SHORTHAND_REGEX=/(\d+(px|in|mm|cm|pt|vw|vh)?)\s(\S+)\s(\S+)/,TRANSFORM_ORIGIN_REGEX=/(-?\d+(px|in|mm|cm|pt|%|vw|vh)?)|top|right|bottom|left|center/g,matchBoxModel=R.match(BOX_MODEL_REGEX),matchObjectPosition=R.match(OBJECT_POSITION_REGEX),matchBorderShorthand=R.match(BORDER_SHORTHAND_REGEX),matchTransformOrigin=R.match(TRANSFORM_ORIGIN_REGEX),isFontWeightStyle=function(e){return e.match(/^fontWeight/)},isBorderStyle=function(e,t){return e.match(/^border(Top|Right|Bottom|Left)(Color|Width|Style)/)&&"string"==typeof t},isBoxModelStyle=function(e,t){return e.match(/^(margin)|(padding)/)&&"string"==typeof t},isObjectPositionStyle=function(e,t){return e.match(/^objectPosition/)&&"string"==typeof t},isTransformOriginStyle=function(e,t){return e.match(/^transformOrigin/)&&"string"==typeof t},processBorders=function(e,t){var r=matchBorderShorthand(t);if(r){if(e.match(/.Color/))return r[4];if(e.match(/.Style/))return r[3];if(e.match(/.Width/))return r[1];throw new Error("StyleSheet: Invalid '"+t+"' for '"+e+"'")}return t},processBoxModel=function(e,t){var r=matchBoxModel(t);if(r){if(e.match(/.Top/))return r[0];if(e.match(/.Right/))return r[1]||r[0];if(e.match(/.Bottom/))return r[2]||r[0];if(e.match(/.Left/))return r[3]||r[1]||r[0];throw new Error("StyleSheet: Invalid '"+t+"' for '"+e+"'")}return t},processFontWeight=function(e,t){return t?"number"==typeof t?t:FONT_WEIGHTS[t.toLowerCase()]:FONT_WEIGHTS.normal},processObjectPosition=function(e,t){var r=matchObjectPosition(t);if(r){if(e.match(/.X/))return r[0];if(e.match(/.Y/))return r[1];throw new Error("StyleSheet: Invalid '"+t+"' for '"+e+"'")}return t},transformOffsetKeywords=function(e){switch(e){case"top":case"left":return"0%";case"right":case"bottom":return"100%";case"center":return"50%";default:return e}},processTransformOrigin=function(e,t){var r=matchTransformOrigin(t);if(r){var o;if(e.match(/.X/))o=r[0];else{if(!e.match(/.Y/))throw new Error("StyleSheet: Invalid '"+t+"' for '"+e+"'");o=r[1]||r[0]}return transformOffsetKeywords(o)}return t},matchNumber=R.when(R.is(String),R.compose(R.complement(R.isEmpty),R.match(/^-?\d*\.?\d*$/))),castFloat=R.when(matchNumber,function(e){return parseFloat(e,10)}),transformStyles=function(e){for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var n=t[o],i=e[n];r[n]=R.compose(castFloat,R.cond([[isBorderStyle,processBorders],[isBoxModelStyle,processBoxModel],[isObjectPositionStyle,processObjectPosition],[isTransformOriginStyle,processTransformOrigin],[isFontWeightStyle,processFontWeight],[R.T,R.always(i)]]))(n,i)}return r},fetchFont=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(t,r){var o,n;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:return o=e.sent,e.next=5,o.buffer?o.buffer():o.arrayBuffer();case 5:return n=e.sent,e.abrupt("return","Buffer"===n.constructor.name?n:Buffer.from(n));case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),FontSource=function(){function e(e,t,r,o,n){this.src=e,this.fontFamily=t,this.fontStyle=r||"normal",this.fontWeight=processFontWeight(o)||400,this.data=null,this.loading=!1,this.options=n}return e.prototype.load=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(){var t,r,o,n,i,a,s=this;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loading=!0,t=this.options,r=t.headers,o=t.body,n=t.method,i=void 0===n?"GET":n,e.next=5,fetchFont(this.src,{method:i,body:o,headers:r});case 5:a=e.sent,this.data=fontkit.create(a),e.next=12;break;case 9:return e.next=11,new Promise(function(e,t){return fontkit.open(s.src,function(r,o){return r?t(r):e(o)})});case 11:this.data=e.sent;case 12:this.loading=!1;case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),e}(),Font=function(){function e(e){this.family=e,this.sources=[]}e.create=function(t){return new e(t)};var t=e.prototype;return t.register=function(e){var t=e.src,r=e.fontWeight,o=e.fontStyle,n=_objectWithoutPropertiesLoose(e,["src","fontWeight","fontStyle"]);this.sources.push(new FontSource(t,this.fontFamily,o,r,n))},t.resolve=function(e){var t,r=e.fontWeight,o=void 0===r?400:r,n=e.fontStyle,i=void 0===n?"normal":n,a=this.sources.filter(function(e){return e.fontStyle===i}),s=a.find(function(e){return e.fontWeight===o});if(s)return s;if(o>=400&&o<=500){var l=a.filter(function(e){return e.fontWeight<=o}),u=a.filter(function(e){return e.fontWeight>500});t=a.filter(function(e){return e.fontWeight>=o&&e.fontWeight<500})[0]||l[l.length-1]||u[0]}var c=a.filter(function(e){return e.fontWeight<o}),d=a.filter(function(e){return e.fontWeight>o});if(o<400&&(t=c[c.length-1]||d[0]),o>500&&(t=d[0]||c[c.length-1]),!t)throw new Error("Could not resolve font for "+this.fontFamily+", fontWeight "+o);return t},e}(),registerEmojiSource=function(e){var t=e.url,r=e.format;emojiSource={url:t,format:void 0===r?"png":r}},getEmojiSource=function(){return emojiSource},emoji={registerEmojiSource:registerEmojiSource,getEmojiSource:getEmojiSource},standardFonts=["Courier","Courier-Bold","Courier-Oblique","Helvetica","Helvetica-Bold","Helvetica-Oblique","Times-Roman","Times-Bold","Times-Italic"],registerHyphenationCallback=function(e){hyphenationCallback=e},getHyphenationCallback=function(){return hyphenationCallback},hyphenation={registerHyphenationCallback:registerHyphenationCallback,getHyphenationCallback:getHyphenationCallback};function printWarning(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];var n=0,i="Warning: "+e.replace(/%s/g,function(){return r[n++]});"undefined"!=typeof console&&console.error(i);try{throw new Error(i)}catch(e){}}var __DEV__="production"!==process.env.NODE_ENV,warning=__DEV__?function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){for(var r=arguments.length,o=new Array(r>2?r-2:0),n=2;n<r;n++)o[n-2]=arguments[n];printWarning.apply(void 0,[t].concat(o))}}:function(){},fonts={},register=function(e,t){"object"==typeof e?t=e:(warning(!1,"Font.register will not longer accept the font source as first argument. Please move it into the data object. For more info refer to https://react-pdf.org/fonts"),t.src=e);var r=t.family;if(fonts[r]||(fonts[r]=Font.create(r)),t.fonts)for(var o=0;o<t.fonts.length;o++)fonts[r].register(_extends({family:r},t.fonts[o]));else fonts[r].register(t)},getRegisteredFonts=function(){return fonts},getRegisteredFontFamilies=function(){return Object.keys(fonts)},getFont=function(e){var t=e.fontFamily;if(standardFonts.includes(t))return null;if(!fonts[t])throw new Error("Font family not registered: "+t+". Please register it calling Font.register() method.");return fonts[t].resolve(e)},load=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(t){var r,o;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.fontFamily,!standardFonts.includes(r)){e.next=4;break}return e.abrupt("return");case 4:if((o=getFont(t)).data||o.loading){e.next=8;break}return e.next=8,o.load();case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),reset=function(){for(var e in fonts)fonts.hasOwnProperty(e)&&(fonts[e].data=null)},clear=function(){fonts={}},Font$1=_extends({register:register,getRegisteredFonts:getRegisteredFonts,getRegisteredFontFamilies:getRegisteredFontFamilies,getFont:getFont,load:load,clear:clear,reset:reset},emoji,hyphenation),isImage=R.propEq("type",IMAGE),fs={};PNG.isValid=function(e){try{return!!new PNG(e)}catch(e){return!1}};var MARKERS=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],JPEG=function(e){if(this.data=null,this.width=null,this.height=null,this.data=e,65496!==e.readUInt16BE(0))throw new Error("SOI not found in JPEG");for(var t,r=2;r<e.length&&(t=e.readUInt16BE(r),r+=2,!MARKERS.includes(t));)r+=e.readUInt16BE(r);if(!MARKERS.includes(t))throw new Error("Invalid JPEG.");r+=3,this.height=e.readUInt16BE(r),r+=2,this.width=e.readUInt16BE(r)};JPEG.isValid=function(e){if(!e||!Buffer.isBuffer(e)||65496!==e.readUInt16BE(0))return!1;for(var t,r=2;r<e.length&&(t=e.readUInt16BE(r),r+=2,!MARKERS.includes(t));)r+=e.readUInt16BE(r);return!!MARKERS.includes(t)};var createCache=function(e){var t=(void 0===e?{}:e).limit,r=void 0===t?100:t,o={},n=[];return{get:function(e){return o[e]},set:function(e,t){n.push(e),n.length>r&&delete o[n.shift()],o[e]=t},reset:function(){o={},n=[]},length:function(){return n.length}}},IMAGE_CACHE=createCache({limit:30}),getAbsoluteLocalPath=function(e){throw new Error("Cannot check local paths in client-side environment")},fetchLocalFile=function(e){return new Promise(function(e,t){try{return t(new Error("Cannot fetch local file in this environemnt"))}catch(e){t(e)}})},fetchRemoteFile=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(t,r){var o,n;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,r);case 2:return o=e.sent,e.next=5,o.buffer?o.buffer():o.arrayBuffer();case 5:return n=e.sent,e.abrupt("return","Buffer"===n.constructor.name?n:Buffer.from(n));case 7:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),isValidFormat=function(e){var t=e.toLowerCase();return"jpg"===t||"jpeg"===t||"png"===t},guessFormat=function(e){var t;return JPEG.isValid(e)?t="jpg":PNG.isValid(e)&&(t="png"),t},isCompatibleBase64=function(e){var t=e.uri;return/^data:image\/[a-zA-Z]*;base64,[^"]*/g.test(t)};function getImage(e,t){switch(t.toLowerCase()){case"jpg":case"jpeg":return new JPEG(e);case"png":return new PNG(e);default:return null}}var resolveBase64Image=function(e){var t=e.uri,r=/^data:image\/([a-zA-Z]*);base64,([^"]*)/g.exec(t),o=r[1],n=r[2];if(!isValidFormat(o))throw new Error("Base64 image invalid format: "+o);return new Promise(function(e){return e(getImage(Buffer.from(n,"base64"),o))})},resolveImageFromData=function(e){if(e.data&&e.format)return new Promise(function(t){return t(getImage(e.data,e.format))});throw new Error("Invalid data given for local file: "+JSON.stringify(e))},resolveBufferImage=function(e){var t=guessFormat(e);if(t)return new Promise(function(r){return r(getImage(e,t))})},getImageFormat=function(e){var t=137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7],r=255===e[0]&&216===e[1]&&255===e[2],o="";if(t)o="png";else{if(!r)throw new Error("Not valid image extension");o="jpg"}return o},resolveImageFromUrl=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(t){var r,o,n,i,a,s,l;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.uri,o=t.body,n=t.headers,i=t.method,a=void 0===i?"GET":i,e.next=7;break;case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,fetchRemoteFile(r,{body:o,headers:n,method:a});case 9:e.t0=e.sent;case 10:return s=e.t0,l=getImageFormat(s),e.abrupt("return",getImage(s,l));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),resolveImage=function(e,t){var r,o=(void 0===t?{}:t).cache,n=void 0===o||o,i=e.data?e.data.toString():e.uri;if(n&&IMAGE_CACHE.get(i))return IMAGE_CACHE.get(i);if(!(r=isCompatibleBase64(e)?resolveBase64Image(e):Buffer.isBuffer(e)?resolveBufferImage(e):"object"==typeof e&&e.data?resolveImageFromData(e):resolveImageFromUrl(e)))throw new Error("Cannot resolve image");return n&&IMAGE_CACHE.set(i,r),r},getSource=R.compose(R.when(R.is(String),function(e){return{uri:e}}),R.either(R.path(["props","src"]),R.path(["props","source"]))),fetchImage=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(t){var r,o;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=getSource(t),o=t.props.cache,r){e.next=5;break}return warning(!1,'Image should receive either a "src" or "source" prop'),e.abrupt("return");case 5:return e.prev=5,e.next=8,resolveImage(r,{cache:o});case 8:t.image=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),t.image={width:0,height:0},console.warn(e.t0.message);case 15:case"end":return e.stop()}},e,null,[[5,11]])}));return function(t){return e.apply(this,arguments)}}(),emojis={},regex=emojiRegex(),reflect=function(e){return function(){return e.apply(void 0,arguments).then(function(e){return e},function(e){return e})}},makeFetchEmojiImage=function(){return reflect(resolveImage)},_removeNoColor=function(e){return"️"!==e},getCodePoints=function(e){return Array.from(e).filter(_removeNoColor).map(function(e){return e.codePointAt(0).toString(16)}).join("-")},buildEmojiUrl=function(e){var t=Font$1.getEmojiSource(),r=t.url,o=t.format;return""+r+getCodePoints(e)+"."+o},fetchEmojis=function(e){var t=Font$1.getEmojiSource();if(!t||!t.url)return[];for(var r,o=[],n=function(){var e=r[0];if(!emojis[e]||emojis[e].loading){var t=buildEmojiUrl(e);emojis[e]={loading:!0};var n=makeFetchEmojiImage();o.push(n({uri:t}).then(function(t){emojis[e].loading=!1,emojis[e].data=t.data}))}};r=regex.exec(e);)n();return o},embedEmojis=function(e){for(var t=[],r=0;r<e.length;r++){for(var o=e[r],n=void 0,i=0;n=regex.exec(o.string);){var a=n.index,s=n[0],l=o.attributes.fontSize,u=o.string.slice(i,a+n[0].length);emojis[s]&&emojis[s].data?t.push({string:u.replace(n,String.fromCharCode(65532)),attributes:_extends({},o.attributes,{attachment:{width:l,height:l,yOffset:Math.floor(.1*l),image:emojis[s].data}})}):t.push({string:u.replace(n,String.fromCharCode(0)),attributes:o.attributes}),i=a+s.length}i<o.string.length&&t.push({string:o.string.slice(i),attributes:o.attributes})}return t},fetchAssets=function(e){for(var t=[],r=e.children.slice(0);r.length>0;){var o=r.shift();isImage(o)&&t.push(fetchImage(o)),o.style&&o.style.fontFamily&&t.push(Font$1.load(o.style)),"string"==typeof o&&t.push.apply(t,fetchEmojis(o)),"string"==typeof o.value&&t.push.apply(t,fetchEmojis(o.value)),o.children&&o.children.forEach(function(e){r.push(e)})}return t},resolveAssets=function(e){return R.compose(R.then(R.always(e)),function(e){return Promise.all(e)},fetchAssets)(e)},compact=R.filter(Boolean),isArray=R.is(Array),isNotArray=R.complement(isArray),castArray=R.when(isNotArray,function(e){return[e]}),mergeStyles=function(e){return e.reduce(function(e,t){var r=isArray(t)?flatten(t):t;return Object.keys(r).forEach(function(t){null!==r[t]&&void 0!==r[t]&&(e[t]=r[t])}),e},{})},flatten=R.compose(mergeStyles,compact,castArray),hasOwnProperty=Object.prototype.hasOwnProperty,styleShorthands={margin:{marginTop:!0,marginRight:!0,marginBottom:!0,marginLeft:!0},marginHorizontal:{marginLeft:!0,marginRight:!0},marginVertical:{marginTop:!0,marginBottom:!0},padding:{paddingTop:!0,paddingRight:!0,paddingBottom:!0,paddingLeft:!0},paddingHorizontal:{paddingLeft:!0,paddingRight:!0},paddingVertical:{paddingTop:!0,paddingBottom:!0},border:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0,borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0,borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0,borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderTop:{borderTopColor:!0,borderTopStyle:!0,borderTopWidth:!0},borderRight:{borderRightColor:!0,borderRightStyle:!0,borderRightWidth:!0},borderBottom:{borderBottomColor:!0,borderBottomStyle:!0,borderBottomWidth:!0},borderLeft:{borderLeftColor:!0,borderLeftStyle:!0,borderLeftWidth:!0},borderColor:{borderTopColor:!0,borderRightColor:!0,borderBottomColor:!0,borderLeftColor:!0},borderRadius:{borderTopLeftRadius:!0,borderTopRightRadius:!0,borderBottomRightRadius:!0,borderBottomLeftRadius:!0},borderStyle:{borderTopStyle:!0,borderRightStyle:!0,borderBottomStyle:!0,borderLeftStyle:!0},borderWidth:{borderTopWidth:!0,borderRightWidth:!0,borderBottomWidth:!0,borderLeftWidth:!0},objectPosition:{objectPositionX:!0,objectPositionY:!0},transformOrigin:{transformOriginX:!0,transformOriginY:!0}},expandedKeys=R.keys(styleShorthands),expandStyles=function(e){if(!e)return e;for(var t=Object.keys(e),r={},o=0;o<t.length;o++){var n=t[o],i=e[n];if(R.includes(n,expandedKeys)){var a=styleShorthands[n];for(var s in a)hasOwnProperty.call(a,s)&&(r[s]=i)}else r[n]=i}return r},parseValue=function(e){var t=/^(-?\d*\.?\d+)(in|mm|cm|pt|vh|vw)?$/g.exec(e);return t?{value:parseFloat(t[1],10),unit:t[2]||"pt"}:{value:e,unit:void 0}},transformUnit=R.curryN(2,function(e,t){var r=parseValue(t);switch(r.unit){case"in":return r.value*DPI;case"mm":return r.value*(1/25.4)*DPI;case"cm":return r.value*(1/2.54)*DPI;case"vh":return r.value*(e.height/100);case"vw":return r.value*(e.width/100);default:return r.value}}),transformUnits=function(e,t){return R.map(transformUnit(e),t)},transformUnits$1=R.curryN(2,transformUnits),resolveMediaQueries=function(e,t){return Object.keys(t).reduce(function(r,o){var n,i;return/@media/.test(o)?_extends({},r,matchMedia(((i={})[o]=t[o],i),e)):_extends({},r,((n={})[o]=t[o],n))},{})},resolveMediaQueries$1=R.curryN(2,resolveMediaQueries),resolveStyles=function(e){return R.compose(transformUnits$1(e),transformStyles,expandStyles,resolveMediaQueries$1(e),flatten)},resolveNodeStyles=function e(t){return function(r){var o=R.propOr({},"box",t);return R.evolve({style:resolveStyles(o),children:R.map(e(t))})(r)}},resolvePageStyles=function(e){var t=R.propOr({},"box",e);return R.evolve({children:R.map(resolveNodeStyles(e)),style:R.compose(transformUnits$1(t),transformStyles,expandStyles,flatten)})(e)},resolveStyles$1=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageStyles)}))}),resolveZIndex=function e(t){return R.evolve({children:R.compose(R.map(e),R.sortBy(R.path(["style","zIndex"])))})(t)},hasVerticalRuler=R.either(R.hasPath(["props","ruler"]),R.hasPath(["props","verticalRuler"])),hasHorizontalRuler=R.either(R.hasPath(["props","ruler"]),R.hasPath(["props","horizontalRuler"])),adjustPageSize=R.compose(R.when(hasVerticalRuler,R.evolve({box:{height:R.add(RULER_WIDTH)},children:R.map(R.evolve({box:{top:R.add(RULER_WIDTH)}}))})),R.when(hasHorizontalRuler,R.evolve({box:{width:R.add(RULER_WIDTH)},children:R.map(R.evolve({box:{left:R.add(RULER_WIDTH)}}))}))),resolveRulers=R.evolve({children:R.map(R.evolve({children:R.map(adjustPageSize)}))}),isPercent=function(e){return/((-)?\d+\.?\d*)%/g.exec(e)},matchPercent=function(e){var t=isPercent(e);if(t){var r=parseFloat(t[1],10),o=r/100;return{value:r,percent:o,absValue:Math.abs(r),absPercent:Math.abs(o)}}return null},getTransformStyle=function(e){return R.pathOr("50%",["style",e])},getOrigin=function(e){if(!e.box)return{};var t=e.box,r=t.left,o=t.top,n=t.width,i=t.height,a=getTransformStyle("transformOriginX")(e),s=getTransformStyle("transformOriginY")(e),l=matchPercent(a),u=matchPercent(s);return{left:r+(l?n*l.percent:a),top:o+(u?i*u.percent:s)}},resolveNodeOrigin=function e(t){return R.compose(R.evolve({children:R.map(e)}),R.converge(R.assoc("origin"),[getOrigin,R.identity]))(t)},resolveOrigin=R.evolve({children:R.map(R.evolve({children:R.map(resolveNodeOrigin)}))}),VALID_ORIENTATIONS=[PORTRAIT,LANDSCAPE],getOrientation=R.compose(R.ifElse(R.includes(R.__,VALID_ORIENTATIONS),R.identity,R.always(PORTRAIT)),R.pathOr(PORTRAIT,["props","orientation"])),isLandscape=R.compose(R.equals(LANDSCAPE),getOrientation),toSizeObject=R.applySpec({width:R.prop(0),height:R.prop(1)}),flipSizeObject=R.applySpec({width:R.prop("height"),height:R.prop("width")}),getStringSize=R.compose(toSizeObject,R.prop(R.__,PAGE_SIZES),R.toUpper),getNumberSize=R.compose(toSizeObject,function(e){return[e]}),throwInvalidError=function(e){throw new Error("Invalid Page size: "+JSON.stringify(e))},getSize=function(e){var t=R.compose(R.cond([[R.is(String),getStringSize],[R.is(Array),toSizeObject],[R.is(Number),getNumberSize],[R.is(Object),R.identity],[R.T,throwInvalidError]]),R.pathOr("A4",["props","size"]))(e);return isLandscape(e)?flipSizeObject(t):t},assocIfNil=function(e,t,r){return R.when(R.compose(R.isNil,R.prop(e)),R.assoc(e,t))(r)},assocIfNil$1=R.curryN(3,assocIfNil),resolvePageSize=function(e){return function(t){var r,o=getSize(t);return R.evolve(((r={})[e]=R.merge(R.__,o),r))(t)}},resolvePageSizes=function(e){return R.evolve({children:R.map(R.evolve({children:R.map(R.compose(resolvePageSize(e),assocIfNil$1(e,{})))}))})},isNotNil=R.complement(R.isNil),firstPass=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){for(var r,o=0;o<t.length;o++){if(r=(0,t[o])(e),isNotNil(r))return r}return r}},getComputedMargin=function(e){return function(t){var r=t._yogaNode;return r?r.getComputedMargin(e):null}},getMargin=R.applySpec({marginTop:firstPass(getComputedMargin(Yoga.EDGE_TOP),R.path(["box","marginTop"]),R.path(["style","marginTop"]),R.path(["style","marginVertical"]),R.path(["style","margin"]),R.always(0)),marginRight:firstPass(getComputedMargin(Yoga.EDGE_RIGHT),R.path(["box","marginRight"]),R.path(["style","marginRight"]),R.path(["style","marginHorizontal"]),R.path(["style","margin"]),R.always(0)),marginBottom:firstPass(getComputedMargin(Yoga.EDGE_BOTTOM),R.path(["box","marginBottom"]),R.path(["style","marginBottom"]),R.path(["style","marginVertical"]),R.path(["style","margin"]),R.always(0)),marginLeft:firstPass(getComputedMargin(Yoga.EDGE_LEFT),R.path(["box","marginLeft"]),R.path(["style","marginLeft"]),R.path(["style","marginHorizontal"]),R.path(["style","margin"]),R.always(0))}),getComputedPadding=function(e){return function(t){var r=t._yogaNode;return r?r.getComputedPadding(e):null}},getPadding=R.applySpec({paddingTop:firstPass(getComputedPadding(Yoga.EDGE_TOP),R.path(["box","paddingTop"]),R.path(["style","paddingTop"]),R.path(["style","paddingVertical"]),R.path(["style","padding"]),R.always(0)),paddingRight:firstPass(getComputedPadding(Yoga.EDGE_RIGHT),R.path(["box","paddingRight"]),R.path(["style","paddingRight"]),R.path(["style","paddingHorizontal"]),R.path(["style","padding"]),R.always(0)),paddingBottom:firstPass(getComputedPadding(Yoga.EDGE_BOTTOM),R.path(["box","paddingBottom"]),R.path(["style","paddingBottom"]),R.path(["style","paddingVertical"]),R.path(["style","padding"]),R.always(0)),paddingLeft:firstPass(getComputedPadding(Yoga.EDGE_LEFT),R.path(["box","paddingLeft"]),R.path(["style","paddingLeft"]),R.path(["style","paddingHorizontal"]),R.path(["style","padding"]),R.always(0))}),getTop=function(e){return e?e.getComputedTop():0},getRight=function(e){return e?e.getComputedRight():0},getBottom=function(e){return e?e.getComputedBottom():0},getLeft=function(e){return e?e.getComputedLeft():0},getPosition=function(e){var t=e._yogaNode;return R.applySpec({top:getTop,right:getRight,bottom:getBottom,left:getLeft})(t)},DEFAULT_DIMENSION={width:0,height:0},getDimension=function(e){var t=e._yogaNode;return t?{width:t.getComputedWidth(),height:t.getComputedHeight()}:DEFAULT_DIMENSION},getComputedBorder=function(e){return function(t){return t?t.getComputedBorder(e):0}},getBorderWidth=function(e){var t=e._yogaNode;return R.applySpec({borderTopWidth:getComputedBorder(Yoga.EDGE_TOP),borderRightWidth:getComputedBorder(Yoga.EDGE_RIGHT),borderBottomWidth:getComputedBorder(Yoga.EDGE_BOTTOM),borderLeftWidth:getComputedBorder(Yoga.EDGE_LEFT)})(t)},upperFirst=R.ifElse(R.isNil,R.identity,R.compose(R.join(""),R.juxt([R.compose(R.toUpper,R.head),R.tail]))),setYogaValue=function(e,t){return function(r){return R.tap(function(o){var n=o._yogaNode;if(!R.isNil(r)&&n){var i=R.complement(R.isNil)(t),a="set"+upperFirst(e),s=a+"Auto",l=a+"Percent",u=matchPercent(r);if(u&&!n[l])throw new Error("You can't pass percentage values to "+e+" property");u?i?n[l](t,u.value):n[l](u.value):"auto"===r?i?n[s](t):n[s]():i?n[a](t,r):n[a](r)}})}},setFlex=setYogaValue("flex"),setDisplay=function(e){return R.tap(function(t){var r=t._yogaNode;r&&r.setDisplay("none"===e?Yoga.DISPLAY_NONE:Yoga.DISPLAY_FLEX)})},setOverflow=function(e){return R.tap(function(t){var r=t._yogaNode;if(!R.isNil(e)&&r){var o=R.cond([[R.equals("hidden"),R.always(Yoga.OVERFLOW_HIDDEN)],[R.equals("scroll"),R.always(Yoga.OVERFLOW_SCROLL)],[R.T,R.always(Yoga.OVERFLOW_VISIBLE)]])(e);r.setOverflow(o)}})},setFlexWrap=function(e){return R.tap(function(t){var r=t._yogaNode;if(r){var o=R.cond([[R.equals("wrap"),R.always(Yoga.WRAP_WRAP)],[R.equals("wrap-reverse"),R.always(Yoga.WRAP_WRAP_REVERSE)],[R.T,R.always(Yoga.WRAP_NO_WRAP)]])(e);r.setFlexWrap(o)}})},setFlexGrow=R.compose(setYogaValue("flexGrow"),R.defaultTo(0)),setFlexBasis=setYogaValue("flexBasis"),setAlign=function(e){return function(t){return R.tap(function(r){var o=r._yogaNode;if(o){var n=R.cond([[R.equals("flex-start"),R.always(Yoga.ALIGN_FLEX_START)],[R.equals("center"),R.always(Yoga.ALIGN_CENTER)],[R.equals("flex-end"),R.always(Yoga.ALIGN_FLEX_END)],[R.equals("stretch"),R.always(Yoga.ALIGN_STRETCH)],[R.equals("baseline"),R.always(Yoga.ALIGN_BASELINE)],[R.equals("space-between"),R.always(Yoga.ALIGN_SPACE_BETWEEN)],[R.equals("space-around"),R.always(Yoga.ALIGN_SPACE_AROUND)],[R.T,R.always(Yoga.ALIGN_AUTO)]])(t);o["setAlign"+upperFirst(e)](n)}})}},setAlignSelf=setAlign("self"),setFlexShrink=R.compose(setYogaValue("flexShrink"),R.defaultTo(1)),setAspectRatio=function(e){return R.tap(function(t){var r=t._yogaNode;!R.isNil(e)&&r&&r.setAspectRatio(e)})},setAlignContent=setAlign("content"),setPositionType=function(e){return R.tap(function(t){var r=t._yogaNode;!R.isNil(e)&&r&&r.setPositionType("absolute"===e?Yoga.POSITION_TYPE_ABSOLUTE:Yoga.POSITION_TYPE_RELATIVE)})},isRow=R.equals("row"),isRowReverse=R.equals("row-reverse"),isColumnReverse=R.equals("column-reverse"),setFlexDirection=function(e){return R.tap(function(t){var r=t._yogaNode;if(r){var o=R.cond([[isRow,R.always(Yoga.FLEX_DIRECTION_ROW)],[isRowReverse,R.always(Yoga.FLEX_DIRECTION_ROW_REVERSE)],[isColumnReverse,R.always(Yoga.FLEX_DIRECTION_COLUMN_REVERSE)],[R.T,R.always(Yoga.FLEX_DIRECTION_COLUMN)]])(e);r.setFlexDirection(o)}})},setJustifyContent=function(e){return R.tap(function(t){var r=t._yogaNode;if(!R.isNil(e)&&r){var o=R.cond([[R.equals("center"),R.always(Yoga.JUSTIFY_CENTER)],[R.equals("flex-end"),R.always(Yoga.JUSTIFY_FLEX_END)],[R.equals("space-between"),R.always(Yoga.JUSTIFY_SPACE_BETWEEN)],[R.equals("space-around"),R.always(Yoga.JUSTIFY_SPACE_AROUND)],[R.equals("space-evenly"),R.always(Yoga.JUSTIFY_SPACE_EVENLY)],[R.T,R.always(Yoga.JUSTIFY_FLEX_START)]])(e);r.setJustifyContent(o)}})},setMarginTop=setYogaValue("margin",Yoga.EDGE_TOP),setMarginRight=setYogaValue("margin",Yoga.EDGE_RIGHT),setMarginBottom=setYogaValue("margin",Yoga.EDGE_BOTTOM),setMarginLeft=setYogaValue("margin",Yoga.EDGE_LEFT),setMargin=function(e){return R.tap(function(t){setMarginTop(e)(t),setMarginRight(e)(t),setMarginBottom(e)(t),setMarginLeft(e)(t)})},setPaddingTop=setYogaValue("padding",Yoga.EDGE_TOP),setPaddingRight=setYogaValue("padding",Yoga.EDGE_RIGHT),setPaddingBottom=setYogaValue("padding",Yoga.EDGE_BOTTOM),setPaddingLeft=setYogaValue("padding",Yoga.EDGE_LEFT),setBorderTop=setYogaValue("border",Yoga.EDGE_TOP),setBorderRight=setYogaValue("border",Yoga.EDGE_RIGHT),setBorderBottom=setYogaValue("border",Yoga.EDGE_BOTTOM),setBorderLeft=setYogaValue("border",Yoga.EDGE_LEFT),setPositionTop=setYogaValue("position",Yoga.EDGE_TOP),setPositionRight=setYogaValue("position",Yoga.EDGE_RIGHT),setPositionBottom=setYogaValue("position",Yoga.EDGE_BOTTOM),setPositionLeft=setYogaValue("position",Yoga.EDGE_LEFT),setWidth=setYogaValue("width"),setMinWidth=setYogaValue("minWidth"),setMaxWidth=setYogaValue("maxWidth"),setHeight=setYogaValue("height"),setMinHeight=setYogaValue("minHeight"),setMaxHeight=setYogaValue("maxHeight"),isText=R.propEq("type",TEXT),isNote=R.propEq("type",NOTE),isPage=R.propEq("type",PAGE),isCanvas=R.propEq("type",CANVAS),StandardFont=function(){function e(e){this.name=e,this.src=PDFDocument.PDFFont.open(null,e)}var t=e.prototype;return t.layout=function(e){var t=this,r=this.src.encode(e),o=r[0],n=r[1];return{positions:n,stringIndices:n.map(function(e,t){return t}),glyphs:o.map(function(e,r){var o=t.getGlyph(parseInt(e,16));return o.advanceWidth=n[r].advanceWidth,o})}},t.glyphForCodePoint=function(e){var t=this.getGlyph(e);return t.advanceWidth=400,t},t.getGlyph=function(e){return{id:e,_font:this.src,codePoints:[e],isLigature:!1,name:this.src.font.characterToGlyph(e)}},t.hasGlyphForCodePoint=function(e){return".notdef"!==this.src.font.characterToGlyph(e)},_createClass(e,[{key:"ascent",get:function(){return 900}},{key:"descent",get:function(){switch(this.name){case"Times-Roman":case"Times-Bold":case"Times-Italic":return-220;case"Courier":case"Courier-Bold":case"Courier-Oblique":return-230;default:return-200}}},{key:"lineGap",get:function(){return 0}},{key:"unitsPerEm",get:function(){return 1e3}}]),e}(),fontCache={},IGNORED_CODE_POINTS=[173],getFontSize=R.pathOr(12,["attributes","fontSize"]),getOrCreateFont=function(e){if(fontCache[e])return fontCache[e];var t=new StandardFont(e);return fontCache[e]=t,t},getFallbackFont=function(){return getOrCreateFont("Helvetica")},shouldFallbackToFont=function(e,t){return!IGNORED_CODE_POINTS.includes(e)&&!t.hasGlyphForCodePoint(e)&&getFallbackFont().hasGlyphForCodePoint(e)},fontSubstitution=function(){return function(e){var t=e.string,r=e.runs,o=null,n=0,i=0,a=[],s=r,l=Array.isArray(s),u=0;for(s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{if((u=s.next()).done)break;c=u.value}var d=c,h=getFontSize(d),g="string"==typeof d.attributes.font?getOrCreateFont(d.attributes.font):d.attributes.font;if(0===t.length){a.push({start:0,end:0,attributes:{font:g}});break}var p=t.slice(d.start,d.end),f=Array.isArray(p),m=0;for(p=f?p:p[Symbol.iterator]();;){var v;if(f){if(m>=p.length)break;v=p[m++]}else{if((m=p.next()).done)break;v=m.value}var y=v,b=y.codePointAt(),T=shouldFallbackToFont(b,g)?getFallbackFont():g;T!==o&&(o&&a.push({start:n,end:i,attributes:{font:o,scale:o?h/o.unitsPerEm:0}}),o=T,n=i),i+=y.length}}if(n<t.length){var E=getFontSize(R.last(r));a.push({start:n,end:t.length,attributes:{font:o,scale:o?E/o.unitsPerEm:0}})}return{string:t,runs:a}}},capitalize=function(e){return e?e.replace(/(^|\s)\S/g,function(e){return e.toUpperCase()}):e},IGNORABLE_CODEPOINTS=[8232,8233],buildSubsetForFont=function(e){return IGNORABLE_CODEPOINTS.reduce(function(t,r){return e.hasGlyphForCodePoint&&e.hasGlyphForCodePoint(r)?t:[].concat(t,[String.fromCharCode(r)])},[])},ignoreChars=function(e){return e.map(function(e){var t=buildSubsetForFont(e.attributes.font),r=new RegExp(t.join("|"));return{string:e.string.replace(r,""),attributes:e.attributes}})},isTextInstance=R.propEq("type",TEXT_INSTANCE),PREPROCESSORS=[ignoreChars,embedEmojis],transformText=function(e,t){switch(t){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();case"capitalize":return capitalize(e);case"upperfirst":return upperFirst(e);default:return e}},getFragments=function e(t){if(!t)return[{string:""}];var r=[],o=t.style,n=o.color,i=void 0===n?"black":n,a=o.backgroundColor,s=o.fontFamily,l=void 0===s?"Helvetica":s,u=o.fontWeight,c=o.fontStyle,d=o.fontSize,h=void 0===d?18:d,g=o.textAlign,p=void 0===g?"left":g,f=o.lineHeight,R=o.textDecoration,m=o.textDecorationColor,v=o.textDecorationStyle,y=o.textTransform,b=o.letterSpacing,T=o.textIndent,E=o.opacity,P=Font$1.getFont({fontFamily:l,fontWeight:u,fontStyle:c}),x={font:P?P.data:l,color:i,opacity:E,fontSize:h,backgroundColor:a,align:p,indent:T,link:t.src,characterSpacing:b,underlineStyle:v,underline:"underline"===R,underlineColor:m||i,strike:"line-through"===R,strikeStyle:v,strikeColor:m||i,lineHeight:f?f*h:null};t.children.forEach(function(t){if(isImage(t))r.push({string:String.fromCharCode(65532),attributes:_extends({},x,{attachment:{width:t.style.width||h,height:t.style.height||h,image:t.image.data}})});else if(isTextInstance(t))r.push({string:transformText(t.value,y),attributes:x});else{var o;if(t)(o=r).push.apply(o,e(t))}});for(var C=0;C<PREPROCESSORS.length;C++){var S=PREPROCESSORS[C];r=S(r)}return r},getAttributedString=function(e){return AttributedString.fromFragments(getFragments(e))},engines={linebreaker:linebreaker,justification:justification,textDecoration:textDecoration,scriptItemizer:scriptItemizer,wordHyphenation:wordHyphenation,fontSubstitution:fontSubstitution},engine=layoutEngine(engines),getContainer=function(e,t,r){return{x:0,y:0,width:t,maxLines:R.path(["style","maxLines"],e),height:r||1/0,truncateMode:R.path(["style","textOverflow"],e)}},getLayoutOptions=function(e){return{hyphenationPenalty:e.props.hyphenationPenalty,hyphenationCallback:Font$1.getHyphenationCallback(),shrinkWhitespaceFactor:{before:-.5,after:-.5}}},layoutText=R.compose(R.reduce(R.concat,[]),R.converge(engine,[getAttributedString,getContainer,getLayoutOptions])),linesWidth=function(e){return e.lines?Math.max.apply(Math,e.lines.map(function(e){return AttributedString.advanceWidth(e)})):-1},linesHeight=function(e){return e.lines?e.lines.reduce(function(e,t){return e+t.box.height},0):-1},measureText=function(e,t,r,o,n,i){return o===Yoga.MEASURE_MODE_EXACTLY?(t.lines||(t.lines=layoutText(t,r,n)),{height:linesHeight(t)}):o===Yoga.MEASURE_MODE_AT_MOST?(t.lines||(t.lines=layoutText(t,r,n)),{height:linesHeight(t),width:Math.min(r,linesWidth(t))}):{}},measureText$1=R.curryN(6,measureText),getRatio=R.ifElse(R.hasPath(["image","data"]),function(e){return e.image.width/e.image.height},R.always(1)),isHeightAuto=R.pathSatisfies(R.isNil,["box","height"]),SAFETY_HEIGHT=10,measureImage=function(e,t,r,o,n,i){var a=getRatio(t),s=getMargin(t),l=getPadding(e),u=isHeightAuto(e)?1/0:e.box.height-l.paddingTop-l.paddingBottom-s.marginTop-s.marginBottom-SAFETY_HEIGHT;if(!t.image)return{width:0,height:0};if(o===Yoga.MEASURE_MODE_EXACTLY&&i===Yoga.MEASURE_MODE_UNDEFINED){var c=r/a;return{height:Math.min(u,c)}}if(i===Yoga.MEASURE_MODE_EXACTLY&&(o===Yoga.MEASURE_MODE_AT_MOST||o===Yoga.MEASURE_MODE_UNDEFINED))return{width:Math.min(n*a,r)};if(o===Yoga.MEASURE_MODE_EXACTLY&&i===Yoga.MEASURE_MODE_AT_MOST){var d=r/a;return{height:Math.min(n,u,d)}}return o===Yoga.MEASURE_MODE_AT_MOST&&i===Yoga.MEASURE_MODE_AT_MOST?a>1?{width:r,height:Math.min(r/a,n)}:{width:Math.min(n*a,r),height:n}:{height:n,width:r}},measureImage$1=R.curryN(6,measureImage),SAFETY_HEIGHT$1=10,getMax=R.reduce(R.max,-1/0),measureCtx=function(){var e={},t=[],r=function(){return e},o=function(e,r){return t.push([e,r])},n=R.compose(r,o),i=function(t,r,n,i){return o(t,r),o(t+n,r),o(t,r+i),o(t+n,r+i),e},a=function(t,r,n,i){return o(t-n,r-(i=i||n)),o(t+n,r-i),o(t+n,r+i),o(t-n,r+i),e};return e.rect=i,e.moveTo=n,e.lineTo=n,e.circle=a,e.polygon=function(){return t.push.apply(t,arguments),r()},e.ellipse=a,e.roundedRect=i,e.text=r,e.path=r,e.lineWidth=r,e.bezierCurveTo=r,e.quadraticCurveTo=r,e.scale=r,e.rotate=r,e.translate=r,e.dash=r,e.clip=r,e.save=r,e.fill=r,e.font=r,e.stroke=r,e.lineCap=r,e.opacity=r,e.restore=r,e.lineJoin=r,e.fontSize=r,e.fillColor=r,e.miterLimit=r,e.strokeColor=r,e.fillOpacity=r,e.strokeOpacity=r,e.linearGradient=r,e.radialGradient=r,e.getWidth=function(){return R.compose(getMax,R.pluck(0))(t)},e.getHeight=function(){return R.compose(getMax,R.pluck(1))(t)},e},measureCanvas=function(e,t){var r=getMargin(t),o=getPadding(e),n=isHeightAuto(e)?1/0:e.box.height-o.paddingTop-o.paddingBottom-r.marginTop-r.marginBottom-SAFETY_HEIGHT$1,i=measureCtx();t.props.paint(i);var a=i.getWidth();return{height:Math.min(n,i.getHeight()),width:a}},measureCanvas$1=R.curryN(6,measureCanvas),YOGA_NODE="_yogaNode",YOGA_CONFIG=Yoga.Config.create();YOGA_CONFIG.setPointScaleFactor(0);var setNodeHeight=function(e){return R.ifElse(isPage,setHeight(e.box.height),setHeight(e.box.height||e.style.height))},setYogaValues=R.tap(function(e){R.compose(setNodeHeight(e),setWidth(e.style.width),setMinWidth(e.style.minWidth),setMaxWidth(e.style.maxWidth),setMinHeight(e.style.minHeight),setMaxHeight(e.style.maxHeight),setMarginTop(e.style.marginTop),setMarginRight(e.style.marginRight),setMarginBottom(e.style.marginBottom),setMarginLeft(e.style.marginLeft),setPaddingTop(e.style.paddingTop),setPaddingRight(e.style.paddingRight),setPaddingBottom(e.style.paddingBottom),setPaddingLeft(e.style.paddingLeft),setPositionType(e.style.position),setPositionTop(e.style.top),setPositionRight(e.style.right),setPositionBottom(e.style.bottom),setPositionLeft(e.style.left),setBorderTop(e.style.borderTopWidth),setBorderRight(e.style.borderRightWidth),setBorderBottom(e.style.borderBottomWidth),setBorderLeft(e.style.borderLeftWidth),setDisplay(e.style.display),setFlexDirection(e.style.flexDirection),setAlignSelf(e.style.alignSelf),setAlignContent(e.style.alignContent),setJustifyContent(e.style.justifyContent),setFlexWrap(e.style.flexWrap),setOverflow(e.style.overflow),setAspectRatio(e.style.aspectRatio),setFlex(e.style.flex),setFlexBasis(e.style.flexBasis),setFlexGrow(e.style.flexGrow),setFlexShrink(e.style.flexShrink))(e)}),insertYogaNodes=function(e){return R.tap(function(t){return e.insertChild(t[YOGA_NODE],e.getChildCount())})},setMeasureFunc=function(e){return function(t){var r=t[YOGA_NODE];return isText(t)&&r.setMeasureFunc(measureText$1(e,t)),isImage(t)&&r.setMeasureFunc(measureImage$1(e,t)),isCanvas(t)&&r.setMeasureFunc(measureCanvas$1(e,t)),t}},isNotText=R.complement(isText),isNotNote=R.complement(isNote),isLayoutElement=R.both(isNotText,isNotNote),isNotTextInstance=R.complement(isTextInstance),createYogaNodes=function e(t){return function(r){var o=Yoga.Node.createWithConfig(YOGA_CONFIG);return R.compose(setMeasureFunc(t),R.when(isLayoutElement,R.evolve({children:R.map(R.compose(insertYogaNodes(o),e(t)))})),setYogaValues,R.assoc(YOGA_NODE,o))(r)}},calculateLayout=R.tap(function(e){return e[YOGA_NODE].calculateLayout()}),persistDimensions=function e(t){return R.evolve({children:R.map(R.when(isNotTextInstance,e)),box:R.always(R.mergeAll([getPadding(t),getMargin(t),getBorderWidth(t),getPosition(t),getDimension(t)]))})(t)},destroyYogaNodes=function e(t){return R.compose(R.dissoc(YOGA_NODE),R.tap(function(e){return Yoga.Node.destroy(e[YOGA_NODE])}),R.evolve({children:R.map(R.when(isLayoutElement,e))}))(t)},resolvePageDimensions=function(e){return R.ifElse(R.isNil,R.always(null),R.compose(destroyYogaNodes,persistDimensions,calculateLayout,createYogaNodes(e)))(e)},resolveDimensions=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageDimensions)}))}),shouldLayoutText=function(e){return isText(e)&&!e.lines},resolveTextLayout=function e(t){return R.compose(R.evolve({children:R.map(e)}),R.when(shouldLayoutText,R.compose(R.converge(R.assoc("lines"),[R.converge(layoutText,[R.identity,R.path(["box","width"]),R.path(["box","height"])]),R.identity]))))(t)},getInheritStyles=R.compose(R.pick(INHERITED_PROPERTIES),R.propOr({},"style")),mergeStyles$1=function(e){return R.evolve({style:R.merge(e)})},resolveInheritance=function e(t){var r=getInheritStyles(t);return R.evolve({children:R.map(R.compose(e,mergeStyles$1(r)))})(t)},removeMargins=R.compose(setMargin(0),R.dissocPath(["style","margin"]),R.dissocPath(["style","marginTop"]),R.dissocPath(["style","marginRight"]),R.dissocPath(["style","marginBottom"]),R.dissocPath(["style","marginLeft"]),R.dissocPath(["style","marginHorizontal"]),R.dissocPath(["style","marginVertical"])),resolvePageMargins=R.evolve({children:R.map(R.evolve({children:R.map(removeMargins)}))}),getNodesHeight=function(e){var t=0,r=1/0;if(R.isEmpty(e))return 0;for(var o=0;o<e.length;o++){var n=e[o];r=Math.min(r,n.box.top),t=Math.max(t,n.box.top+n.box.height)}return t-r},getWrap=R.ifElse(R.anyPass([isNote,isImage,isCanvas]),R.always(!1),R.pathOr(!0,["props","wrap"])),getBreak=R.pathOr(!1,["props","break"]),getMinPresenceAhead=R.path(["props","minPresenceAhead"]),defaultPresenceAhead=function(e){return function(t){return Math.min(e.box.height,t)}},getPresenceAhead=function(e,t){for(var r=0,o=0;o<e.length;o++){var n=e[o];if(n.box){var i=t>n.box.top,a=n.props.presenceAhead||defaultPresenceAhead(n);n&&i&&(r+=a(t-n.box.top))}}return r},shouldBreak=function(e,t,r){var o=getMinPresenceAhead(e),n=getPresenceAhead(t,r),i=getNodesHeight(t),a=r<e.box.top+e.box.height,s=getWrap(e);return getBreak(e)||!s&&a||o<i&&n<o},getPaddingBottom=R.pathOr(0,["style","paddingBottom"]),getContentArea=function(e){var t=getPaddingBottom(e);return R.path(["style","height"],e)-t},getHeight=R.path(["box","height"]),getTop$1=R.pathOr(0,["box","top"]),getChildren=R.propOr([],"children"),setChildren=R.assoc("children"),setHeight$1=R.assocPath(["box","height"]),setBreak=R.assocPath(["props","break"]),breakChildren=function e(t,r){for(var o=getChildren(r),n=null,i=[],a=[],s=0;s<o.length;s++){var l=o[s],u=getTop$1(l),c=getHeight(l),d=o.slice(s+1);if(shouldBreak(l,d,t)){n=u,i=R.compose(R.prepend(setBreak(!1,l)),R.slice(s+1,1/0))(o);break}var h=e(t,l),g=h[0],p=h[1],f=h[2];if(!R.isNil(f)){n=u+f,a.push(R.compose(setChildren(g),setHeight$1(Math.ceil(n/t)*t-u))(l)),i=R.compose(R.prepend(R.compose(setChildren(p),setHeight$1(l.box.height-c))(l)),R.slice(s+1,1/0))(o);break}a.push(setChildren(g,l))}return[a,i,n]},breakNode=function(e){return function(t){var r=breakChildren(e,t),o=r[0],n=r[1],i=r[2];return R.isNil(i)?[t]:[R.compose(setChildren(o),setHeight$1(Math.ceil(i/e)*e))(t),R.compose(setChildren(n),setHeight$1(t.box.height-i))(t)]}},breakPage=function(e){var t=[],r=getContentArea(e),o=breakNode(r)(e),n=o[0],i=o[1];for(t.push(n);i;)n=(o=R.compose(breakNode(r),resolvePageDimensions,setHeight$1(null))(i))[0],i=o[1],t.push(n);return t},resolvePageBreaks=R.evolve({children:R.map(R.evolve({children:R.compose(R.flatten,R.map(breakPage))}))}),getTop$2=R.pathOr(0,["box","top"]),getHeight$1=R.path(["box","height"]),getChildren$1=R.propOr([],"children"),isElementOutside=R.useWith(R.lte,[R.identity,getTop$2]),splitNodes=function(e,t){for(var r=[],o=[],n=0;n<t.length;n++){var i=t[n],a=splitNode(e,i),s=a[0],l=a[1];s&&r.push(s),l&&o.push(l)}return[r,o]},splitChildren=function(e,t){var r=getChildren$1(t),o=e-getTop$2(t);return splitNodes(o,r)},splitNode=R.curryN(2,function(e,t){if(!t)return[null,null];var r=getTop$2(t),o=e<r+getHeight$1(t);if(isElementOutside(e,t))return[null,R.evolve({box:{top:R.subtract(R.__,e)}})(t),!1];if(o){var n=splitChildren(e,t),i=n[0],a=n[1];return[R.evolve({children:R.always(i),style:{borderBottomLeftRadius:R.always(0),borderBottomRightRadius:R.always(0)},box:{height:R.when(R.always(o),R.always(e-r))}})(t),R.evolve({children:R.always(a),style:{borderTopLeftRadius:R.always(0),borderTopRightRadius:R.always(0)},box:{top:R.always(0),height:R.subtract(R.__,e-r)}})(t)]}return[t,null,!1]}),getPaddingBottom$1=R.pathOr(0,["style","paddingBottom"]),getWrappingArea=function(e){var t=getPaddingBottom$1(e);return R.path(["style","height"],e)-t},splitPage=function(e){if(!e)return[];for(var t=getWrappingArea(e),r=splitNode(t,e),o=[r[0]],n=r[1];null!==n;)r=splitNode(t,n),o.push(r[0]),n=r[1];return o},resolvePageSplitting=R.evolve({children:R.map(R.evolve({children:R.compose(R.flatten,R.map(splitPage))}))}),restorePageSize=R.evolve({children:R.map(R.evolve({children:R.map(resolvePageSize("box"))}))}),resolvePageWrapping=R.compose(restorePageSize,resolvePageSplitting,resolvePageBreaks),getNodeText=function(e){return R.cond([[R.is(String),R.identity],[isTextInstance,R.prop("value")],[R.T,R.compose(getNodesText,R.propOr([],"children"))]])(e)},getNodesText=R.compose(R.join(""),R.map(getNodeText)),wrapTextInstance=function(e){return[{type:"TEXT_INSTANCE",value:e}]},resolveNoteChildren=function e(t){return R.ifElse(isNote,R.evolve({children:R.compose(wrapTextInstance,getNodesText)}),R.evolve({children:R.map(e)}))(t)},resolvePageHorizontalPadding=function(e){return function(t){var r=matchPercent(t);return r?r.percent*e.width:t}},resolvePageVerticalPadding=function(e){return function(t){var r=matchPercent(t);return r?r.percent*e.height:t}},resolvePagePaddings=function(e){return R.evolve({style:R.evolve({paddingLeft:resolvePageHorizontalPadding(e.box),paddingRight:resolvePageHorizontalPadding(e.box),paddingTop:resolvePageVerticalPadding(e.box),paddingBottom:resolvePageVerticalPadding(e.box)})})(e)},resolvePagePaddings$1=R.evolve({children:R.map(R.evolve({children:R.map(resolvePagePaddings)}))}),resolveRadius=function(e){return function(t){var r=matchPercent(t);return r?r.percent*Math.min(e.width,e.height):t}},resolvePercentRadius=function e(t){return R.evolve({children:R.map(e),style:R.evolve({borderTopLeftRadius:resolveRadius(t.box),borderTopRightRadius:resolveRadius(t.box),borderBottomRightRadius:resolveRadius(t.box),borderBottomLeftRadius:resolveRadius(t.box)})})(t)},transformHeight=function(e){return function(t){var r=matchPercent(t);return r?r.percent*e:t}},getPageArea=function(e){return R.path(["style","height"],e)-R.pathOr(0,["style","paddingTop"],e)-R.pathOr(0,["style","paddingBottom"],e)},hasHeight=R.hasPath(["style","height"]),resolveNodePercentHeight=function(e){return function(t){if(hasHeight(e)){var r=getPageArea(e);return R.evolve({style:{height:transformHeight(r)}})(t)}return t}},resolvePagePercentHeight=function(e){return R.evolve({children:R.map(resolveNodePercentHeight(e))})(e)},resolvePercentHeight=R.evolve({children:R.map(R.evolve({children:R.map(resolvePagePercentHeight)}))}),isLink=R.propEq("type",LINK),hasRenderProp=R.hasPath(["props","render"]),hasTextInstanceChilds=R.compose(R.all(isTextInstance),R.propOr([],"children")),resolveLinkSubstitution=function e(t){return R.evolve({children:R.map(R.ifElse(R.both(isLink,R.either(hasRenderProp,hasTextInstanceChilds)),R.assoc("type",TEXT),e))})(t)},resolveAbsoluteCoordinates=function e(t){var r=R.pathOr(0,["box","top"],t),o=R.pathOr(0,["box","left"],t);return R.evolve({children:R.map(R.compose(e,R.evolve({box:R.evolve({top:R.add(r),bottom:R.add(r),left:R.add(o),right:R.add(o)}),origin:R.evolve({top:R.add(r),left:R.add(o)})})))})(t)},asyncCompose=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(r){var o,n,i,a,s;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=R.reverse(t),n=Array.isArray(o),i=0,o=n?o:o[Symbol.iterator]();case 1:if(!n){e.next=7;break}if(!(i>=o.length)){e.next=4;break}return e.abrupt("break",17);case 4:a=o[i++],e.next=11;break;case 7:if(!(i=o.next()).done){e.next=10;break}return e.abrupt("break",17);case 10:a=i.value;case 11:return s=a,e.next=14,s(r);case 14:r=e.sent;case 15:e.next=1;break;case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},startTimer=function(e){return R.tap(function(){return console.time(e)})},endTimer=function(e){return R.tap(function(){return console.timeEnd(e)})},resolvePageSizeStyle=resolvePageSizes("style"),layout=asyncCompose(resolveAbsoluteCoordinates,resolveRulers,resolveOrigin,endTimer("resolvePageBreaks"),resolvePageWrapping,startTimer("resolvePageBreaks"),resolveTextLayout,resolvePercentRadius,resolveZIndex,resolveDimensions,resolveAssets,resolveInheritance,resolvePercentHeight,resolvePagePaddings$1,resolveStyles$1,resolveNoteChildren,resolveLinkSubstitution,resolvePageMargins,resolvePageSizeStyle),save=function(e){return R.tap(function(){return e.save()})},restore=function(e){return R.tap(function(){return e.restore()})},renderText=function(e,t){var r=t.box,o=r.top,n=r.left,i=R.pathOr(0,["box","paddingTop"],t),a=R.pathOr(0,["box","paddingLeft"],t),s=t.lines[0]?t.lines[0].box.y:0;return e.save(),e.translate(n+a,o+i-s),PDFRenderer.render(e,[t.lines]),e.restore(),t},renderText$1=R.curryN(2,renderText),renderPage=function(e,t){var r=t.box,o=r.width,n=r.height;return e.addPage({size:[o,n],margin:0}),t},renderPage$1=R.curryN(2,renderPage),PROTOCOL_REGEXP=/^([a-z]+\:(\/\/)?)/i,getURL=function(e){return e?"string"!=typeof e||e.match(PROTOCOL_REGEXP)?e:"http://"+e:""},getSource$1=R.compose(getURL,R.either(R.path(["props","src"]),R.path(["props","href"]))),renderLink=function(e,t){var r=t.box,o=r.top,n=r.left,i=r.width,a=r.height,s=getSource$1(t);return e.link(n,o,i,a,s),t},renderLink$1=R.curryN(2,renderLink),renderNote=function(e,t){var r=t.box,o=r.top,n=r.left,i=t.children[0]?t.children[0].value:"";return e.note(n,o,0,0,i),t},renderNote$1=R.curryN(2,renderNote),KAPPA=(Math.sqrt(2)-1)/3*4,clipNode=function(e,t){var r=t.box,o=r.top,n=r.left,i=r.width,a=r.height,s=t.style,l=s.borderTopLeftRadius,u=void 0===l?0:l,c=s.borderTopRightRadius,d=void 0===c?0:c,h=s.borderBottomRightRadius,g=void 0===h?0:h,p=s.borderBottomLeftRadius,f=void 0===p?0:p,R=Math.min(d,.5*i,.5*a),m=R*(1-KAPPA);e.moveTo(n+R,o),e.lineTo(n+i-R,o),e.bezierCurveTo(n+i-m,o,n+i,o+m,n+i,o+R);var v=Math.min(g,.5*i,.5*a),y=v*(1-KAPPA);e.lineTo(n+i,o+a-v),e.bezierCurveTo(n+i,o+a-y,n+i-y,o+a,n+i-v,o+a);var b=Math.min(f,.5*i,.5*a),T=b*(1-KAPPA);e.lineTo(n+b,o+a),e.bezierCurveTo(n+T,o+a,n,o+a-T,n,o+a-b);var E=Math.min(u,.5*i,.5*a),P=E*(1-KAPPA);return e.lineTo(n,o+E),e.bezierCurveTo(n,o+P,n+P,o,n+E,o),e.closePath(),e.clip(),t},clipNode$1=R.curryN(2,clipNode),isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},applyContainObjectFit=function(e,t,r,o,n,i){var a=e/t,s=r/o,l=matchPercent(n),u=matchPercent(i),c=l?l.percent:.5,d=u?u.percent:.5;if(a>s){var h=t,g=h*s,p=isNumeric(i)?i:0;return{width:g,height:h,xOffset:isNumeric(n)?n:(e-g)*c,yOffset:p}}var f=e,R=f/s,m=isNumeric(n)?n:0;return{width:f,height:R,yOffset:isNumeric(i)?i:(t-R)*d,xOffset:m}},applyNoneObjectFit=function(e,t,r,o,n,i){var a=r,s=o,l=matchPercent(n),u=matchPercent(i),c=l?l.percent:.5,d=u?u.percent:.5;return{width:a,height:s,xOffset:isNumeric(n)?n:(e-a)*c,yOffset:isNumeric(i)?i:(t-s)*d}},applyCoverObjectFit=function(e,t,r,o,n,i){var a=r/o,s=e/t,l=matchPercent(n),u=matchPercent(i),c=l?l.percent:.5,d=u?u.percent:.5;if(s>a){var h=e,g=h/a,p=isNumeric(n)?n:0;return{width:h,height:g,yOffset:isNumeric(i)?i:(t-g)*d,xOffset:p}}var f=t*a;return{width:f,height:t,xOffset:isNumeric(n)?n:(e-f)*c,yOffset:isNumeric(i)?i:0}},applyScaleDownObjectFit=function(e,t,r,o,n,i){var a=applyContainObjectFit(e,t,r,o,n,i),s=applyNoneObjectFit(e,t,r,o,n,i);return a.width<s.width?a:s},applyFillObjectFit=function(e,t,r,o){return{width:e,height:t,xOffset:matchPercent(r)?0:r||0,yOffset:matchPercent(o)?0:o||0}},resolveObjectFit=function(e,t,r,o,n,i,a){switch(void 0===e&&(e="fill"),e){case"contain":return applyContainObjectFit(t,r,o,n,i,a);case"cover":return applyCoverObjectFit(t,r,o,n,i,a);case"none":return applyNoneObjectFit(t,r,o,n,i,a);case"scale-down":return applyScaleDownObjectFit(t,r,o,n,i,a);default:return applyFillObjectFit(t,r,i,a)}},drawImage=function(e){return function(t){var r=t.box,o=r.left,n=r.top,i=t.style,a=i.opacity,s=i.objectPositionX,l=i.objectPositionY,u=t.box.paddingLeft||0,c=t.box.paddingRight||0,d=t.box.paddingBottom||0,h=t.box.paddingLeft||0,g=resolveObjectFit(t.style.objectFit,t.box.width-h-c,t.box.height-u-d,t.image.width,t.image.height,s,l),p=g.width,f=g.height,R=g.xOffset,m=g.yOffset;return t.image.data&&(0!==p&&0!==f?e.fillOpacity(a||1).image(t.image.data,o+h+R,n+u+m,{width:p,height:f}):warning(!1,"Image with src '"+t.props.src+"' skipped due to invalid dimensions")),t}},renderImage=function(e,t){return R.compose(restore(e),drawImage(e),clipNode$1(e),save(e))(t),t},renderImage$1=R.curryN(2,renderImage),availableMethods=["dash","clip","save","path","fill","font","text","rect","scale","moveTo","lineTo","stroke","rotate","circle","lineCap","opacity","ellipse","polygon","restore","lineJoin","fontSize","fillColor","lineWidth","translate","miterLimit","strokeColor","fillOpacity","roundedRect","strokeOpacity","bezierCurveTo","quadraticCurveTo","linearGradient","radialGradient"],painter=function(e){var t=availableMethods.reduce(function(r,o){var n;return _extends({},r,((n={})[o]=function(){return e[o].apply(e,arguments),t},n))},{});return t},defaultsZero=R.pathOr(0),renderCanvas=function(e,t){var r=t.box,o=r.top,n=r.left,i=r.width,a=r.height,s=defaultsZero("paddingLeft",t.box),l=defaultsZero("paddingRight",t.box),u=defaultsZero("paddingTop",t.box),c=i-s-l,d=a-u-defaultsZero("paddingBottom",t.box);return warning(c&&d,"Canvas element has null width or height. Please provide valid values via the `style` prop in order to correctly render it."),e.save().translate(n+s,o+u),t.props.paint&&t.props.paint(painter(e),c,d),e.restore(),t},renderCanvas$1=R.curryN(2,renderCanvas),range=function(e,t){return Array.from({length:Math.ceil(e/t)},function(e,r){return r*t})},matchPercentage=function(e){var t=matchPercent(e);return t?100/t.value:null},getVerticalSteps=function(e){var t=e.props.horizontalRulerSteps||e.props.rulerSteps||DEFAULT_RULER_STEPS;if("string"==typeof t){var r=matchPercentage(t);if(r)return(e.box.width-(hasVerticalRuler(e)?RULER_WIDTH:0))/r;throw new Error("Page: Invalid horizontal steps value")}return t},getHorizontalSteps=function(e){var t=e.props.verticalRulerSteps||e.props.rulerSteps||DEFAULT_RULER_STEPS;if("string"==typeof t){var r=matchPercentage(t);if(r)return(e.box.height-(hasVerticalRuler(e)?RULER_WIDTH:0))/r;throw new Error("Page: Invalid horizontal steps value")}return t},renderVerticalRuler=function(e){return function(t){var r=t.box.width,o=t.box.height,n=hasHorizontalRuler(t)?RULER_WIDTH:0,i=range(r,getVerticalSteps(t));return e.rect(n,0,r,RULER_WIDTH).fill(RULER_COLOR).moveTo(n,RULER_WIDTH).lineTo(r,RULER_WIDTH).stroke(LINE_COLOR),i.map(function(t){e.moveTo(n+t,0).lineTo(n+t,RULER_WIDTH).stroke(LINE_COLOR).fillColor("black").text(""+Math.round(t),n+t+1,1),0!==t&&e.moveTo(n+t,RULER_WIDTH).lineTo(n+t,o).stroke(GRID_COLOR)}),t}},renderHorizontalRuler=function(e){return function(t){var r=t.box.width,o=t.box.height,n=hasVerticalRuler(t)?RULER_WIDTH:0,i=range(o,getHorizontalSteps(t));return e.rect(0,n,RULER_WIDTH,o).fill(RULER_COLOR).moveTo(RULER_WIDTH,hasHorizontalRuler(t)?RULER_WIDTH:0).lineTo(RULER_WIDTH,o).stroke(LINE_COLOR),i.map(function(t){e.moveTo(0,n+t).lineTo(RULER_WIDTH,n+t).stroke(LINE_COLOR).fillColor("black").text(""+Math.round(t),1,n+t+1),0!==t&&e.moveTo(RULER_WIDTH,n+t).lineTo(r,n+t).stroke(GRID_COLOR)}),t}},renderRulers=function(e,t){return e.save().lineWidth(LINE_WIDTH).fontSize(RULER_FONT_SIZE).opacity(1),R.compose(R.when(hasVerticalRuler,renderVerticalRuler(e)),R.when(hasHorizontalRuler,renderHorizontalRuler(e)))(t),e.restore(),t},renderRulers$1=R.curryN(2,renderRulers),getDocumentProp=function(e){return function(t,r){return R.pathOr(t,["children",0,"props",r],e)}},setPDFMetadata=function(e){return function(t,r){r&&(e.info[t]=r)}},addMetadata=function(e,t){var r=getDocumentProp(t),o=setPDFMetadata(e),n=r(null,"title"),i=r(null,"author"),a=r(null,"subject"),s=r(null,"keywords"),l=r("react-pdf","creator"),u=r("react-pdf","producer");return o("Title",n),o("Author",i),o("Subject",a),o("Keywords",s),o("Creator",l),o("Producer",u),t},addMetadata$1=R.curryN(2,addMetadata),CONTENT_COLOR="#a1c6e7",PADDING_COLOR="#c4deb9",MARGIN_COLOR="#f8cca1",shouldDebug=R.pathEq(["props","debug"],!0),debugContent=function(e,t){var r=t.box,o=r.left,n=r.top,i=r.width,a=r.height,s=r.paddingLeft,l=r.paddingTop,u=r.paddingRight,c=r.paddingBottom;e.fillColor(CONTENT_COLOR).opacity(.5).rect(o+s,n+l,i-s-u,a-l-c).fill()},debugPadding=function(e,t){var r=t.box,o=r.left,n=r.top,i=r.width,a=r.height,s=r.paddingLeft,l=r.paddingTop,u=r.paddingRight,c=r.paddingBottom;e.fillColor(PADDING_COLOR).opacity(.5),e.rect(o+s,n,i-u-s,l).fill(),e.rect(o,n,s,a).fill(),e.rect(o+i-u,n,u,a).fill(),e.rect(o+s,n+a-c,i-u-s,c).fill()},debugMargin=function(e,t){var r=t.box,o=r.left,n=r.top,i=r.width,a=r.height,s=r.marginLeft,l=r.marginTop,u=r.marginRight,c=r.marginBottom;e.fillColor(MARGIN_COLOR).opacity(.5),e.rect(o,n-l,i,l).fill(),e.rect(o-s,n-l,s,a+l+c).fill(),e.rect(o+i,n-l,u,a+l+c).fill(),e.rect(o,n+a,i,c).fill()},debugText=function(e,t){var r=t.box,o=r.left,n=r.top,i=r.width,a=r.height,s=r.marginLeft,l=r.marginTop,u=r.marginRight,c=r.marginBottom,d=Math.round(i+s+u),h=Math.round(a+l+c);e.fontSize(4).opacity(1).fillColor("black").text(d+" x "+h,o-s,Math.max(n-l-4,1))},debugOrigin=function(e,t){t.origin&&e.circle(t.origin.left,t.origin.top,3).fill("red").circle(t.origin.left,t.origin.top,5).stroke("red")},renderDebug=function(e,t){return shouldDebug(t)?(e.save(),debugContent(e,t),debugPadding(e,t),debugMargin(e,t),debugText(e,t),debugOrigin(e,t),e.restore(),t):t},renderDebug$1=R.curryN(2,renderDebug),KAPPA$1=(Math.sqrt(2)-1)/3*4,clipBorderTop=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderTopWidth,c=r.borderRightWidth,d=r.borderLeftWidth;e.moveTo(a+n,i),e.lineTo(a+s-o,i);var h=o*(1-KAPPA$1);e.bezierCurveTo(a+s-h,i,a+s,i+h,a+s,i+o);var g=i+Math.max(u,o);e.lineTo(a+s,g),e.lineTo(a+s-c,g);var p=Math.max(o-c,0),f=Math.max(o-u,0),R=p*(1-KAPPA$1),m=f*(1-KAPPA$1);e.bezierCurveTo(a+s-c,i+u+m,a+s-c-R,i+u,a+s-c-p,i+u),e.lineTo(a+Math.max(n,d),i+u);var v=Math.max(n-d,0),y=Math.max(n-u,0),b=v*(1-KAPPA$1),T=y*(1-KAPPA$1),E=i+Math.max(u,n);e.bezierCurveTo(a+d+b,i+u,a+d,i+u+T,a+d,E),e.lineTo(a,E),e.lineTo(a,i+n);var P=n*(1-KAPPA$1);if(e.bezierCurveTo(a,i+P,a+P,i,a+n,i),e.closePath(),e.clip(),c){var x=-u/c;e.moveTo(a+s/2,x*(-s/2)+i),e.lineTo(a+s,i),e.lineTo(a,i),e.lineTo(a,i+l),e.closePath(),e.clip()}if(d){var C=-u/d;e.moveTo(a+s/2,C*(-s/2)+i),e.lineTo(a,i),e.lineTo(a+s,i),e.lineTo(a+s,i+l),e.closePath(),e.clip()}},fillBorderTop=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=r.borderTopColor,u=r.borderTopWidth,c=r.borderTopStyle,d=r.borderRightWidth,h=r.borderLeftWidth,g=n*(1-KAPPA$1),p=o*(1-KAPPA$1);e.moveTo(a,i+Math.max(n,u)),e.bezierCurveTo(a,i+g,a+g,i,a+n,i),e.lineTo(a+s-o,i),e.bezierCurveTo(a+s-p,i,a+s,i+p,a+s,i+o),e.strokeColor(l),e.lineWidth(2*Math.max(d,u,h)),"dashed"===c?e.dash(2*u,{space:1.2*u}):"dotted"===c&&e.dash(u,{space:1.2*u}),e.stroke(),e.undash()},clipBorderRight=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderTopWidth,c=r.borderRightWidth,d=r.borderBottomWidth;e.moveTo(a+s,i+o),e.lineTo(a+s,i+l-n);var h=n*(1-KAPPA$1);e.bezierCurveTo(a+s,i+l-h,a+s-h,i+l,a+s-n,i+l);var g=a+s-Math.max(c,n);e.lineTo(g,i+l),e.lineTo(g,i+l-d);var p=Math.max(n-c,0),f=Math.max(n-d,0),R=p*(1-KAPPA$1),m=f*(1-KAPPA$1);e.bezierCurveTo(a+s-c-R,i+l-d,a+s-c,i+l-d-m,a+s-c,i+l-Math.max(n,d)),e.lineTo(a+s-c,i+Math.max(o,u));var v=Math.max(o-c,0),y=Math.max(o-u,0),b=v*(1-KAPPA$1),T=y*(1-KAPPA$1),E=a+s-Math.max(o,c);e.bezierCurveTo(a+s-c,i+u+T,a+s-c-b,i+u,E,i+u),e.lineTo(E,i),e.lineTo(a+s-o,i);var P=o*(1-KAPPA$1);if(e.bezierCurveTo(a+s-P,i,a+s,i+P,a+s,i+o),e.closePath(),e.clip(),u){var x=-u/c;e.moveTo(a+s/2,x*(-s/2)+i),e.lineTo(a+s,i),e.lineTo(a+s,i+l),e.lineTo(a,i+l),e.closePath(),e.clip()}if(d){var C=d/c;e.moveTo(a+s/2,C*(-s/2)+i+l),e.lineTo(a+s,i+l),e.lineTo(a+s,i),e.lineTo(a,i),e.closePath(),e.clip()}},fillBorderRight=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderRightColor,c=r.borderRightStyle,d=r.borderRightWidth,h=r.borderTopWidth,g=r.borderBottomWidth,p=n*(1-KAPPA$1),f=o*(1-KAPPA$1);e.moveTo(a+s-o,i),e.bezierCurveTo(a+s-f,i,a+s,i+f,a+s,i+o),e.lineTo(a+s,i+l-n),e.bezierCurveTo(a+s,i+l-p,a+s-p,i+l,a+s-n,i+l),e.strokeColor(u),e.lineWidth(2*Math.max(d,h,g)),"dashed"===c?e.dash(2*d,{space:1.2*d}):"dotted"===c&&e.dash(d,{space:1.2*d}),e.stroke(),e.undash()},clipBorderBottom=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderBottomWidth,c=r.borderRightWidth,d=r.borderLeftWidth;e.moveTo(a+s-n,i+l),e.lineTo(a+o,i+l);var h=o*(1-KAPPA$1);e.bezierCurveTo(a+h,i+l,a,i+l-h,a,i+l-o);var g=i+l-Math.max(u,o);e.lineTo(a,g),e.lineTo(a+d,g);var p=Math.max(o-d,0),f=Math.max(o-u,0),R=p*(1-KAPPA$1),m=f*(1-KAPPA$1);e.bezierCurveTo(a+d,i+l-u-m,a+d+R,i+l-u,a+d+p,i+l-u),e.lineTo(a+s-Math.max(n,c),i+l-u);var v=Math.max(n-c,0),y=Math.max(n-u,0),b=v*(1-KAPPA$1),T=y*(1-KAPPA$1),E=i+l-Math.max(u,n);e.bezierCurveTo(a+s-c-b,i+l-u,a+s-c,i+l-u-T,a+s-c,E),e.lineTo(a+s,E),e.lineTo(a+s,i+l-n);var P=n*(1-KAPPA$1);if(e.bezierCurveTo(a+s,i+l-P,a+s-P,i+l,a+s-n,i+l),e.closePath(),e.clip(),c){var x=u/c;e.moveTo(a+s/2,x*(-s/2)+i+l),e.lineTo(a+s,i+l),e.lineTo(a,i+l),e.lineTo(a,i),e.closePath(),e.clip()}if(d){var C=-u/d;e.moveTo(a+s/2,C*(s/2)+i+l),e.lineTo(a,i+l),e.lineTo(a+s,i+l),e.lineTo(a+s,i),e.closePath(),e.clip()}},fillBorderBottom=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderBottomColor,c=r.borderBottomStyle,d=r.borderBottomWidth,h=r.borderRightWidth,g=r.borderLeftWidth,p=o*(1-KAPPA$1),f=n*(1-KAPPA$1);e.moveTo(a+s,i+l-n),e.bezierCurveTo(a+s,i+l-f,a+s-f,i+l,a+s-n,i+l),e.lineTo(a+o,i+l),e.bezierCurveTo(a+p,i+l,a,i+l-p,a,i+l-o),e.strokeColor(u),e.lineWidth(2*Math.max(d,h,g)),"dashed"===c?e.dash(2*d,{space:1.2*d}):"dotted"===c&&e.dash(d,{space:1.2*d}),e.stroke(),e.undash()},clipBorderLeft=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.width,l=t.height,u=r.borderTopWidth,c=r.borderLeftWidth,d=r.borderBottomWidth;e.moveTo(a,i+l-o),e.lineTo(a,i+n);var h=n*(1-KAPPA$1);e.bezierCurveTo(a,i+h,a+h,i,a+n,i);var g=a+Math.max(c,n);e.lineTo(g,i),e.lineTo(g,i+u);var p=Math.max(n-c,0),f=Math.max(n-u,0),R=p*(1-KAPPA$1),m=f*(1-KAPPA$1);e.bezierCurveTo(a+c+R,i+u,a+c,i+u+m,a+c,i+Math.max(n,u)),e.lineTo(a+c,i+l-Math.max(o,d));var v=Math.max(o-c,0),y=Math.max(o-d,0),b=v*(1-KAPPA$1),T=y*(1-KAPPA$1),E=a+Math.max(o,c);e.bezierCurveTo(a+c,i+l-d-T,a+c+b,i+l-d,E,i+l-d),e.lineTo(E,i+l),e.lineTo(a+o,i+l);var P=o*(1-KAPPA$1);if(e.bezierCurveTo(a+P,i+l,a,i+l-P,a,i+l-o),e.closePath(),e.clip(),d){var x=-d/c;e.moveTo(a+s/2,x*(s/2)+i+l),e.lineTo(a,i+l),e.lineTo(a,i),e.lineTo(a+s,i),e.closePath(),e.clip()}if(d){var C=-u/c;e.moveTo(a+s/2,C*(-s/2)+i),e.lineTo(a,i),e.lineTo(a,i+l),e.lineTo(a+s,i+l),e.closePath(),e.clip()}},fillBorderLeft=function(e,t,r,o,n){var i=t.top,a=t.left,s=t.height,l=r.borderLeftColor,u=r.borderLeftStyle,c=r.borderLeftWidth,d=r.borderTopWidth,h=r.borderBottomWidth,g=o*(1-KAPPA$1),p=n*(1-KAPPA$1);e.moveTo(a+o,i+s),e.bezierCurveTo(a+g,i+s,a,i+s-g,a,i+s-o),e.lineTo(a,i+n),e.bezierCurveTo(a,i+p,a+p,i,a+n,i),e.strokeColor(l),e.lineWidth(2*Math.max(c,d,h)),"dashed"===u?e.dash(2*c,{space:1.2*c}):"dotted"===u&&e.dash(c,{space:1.2*c}),e.stroke(),e.undash()},shouldRenderBorders=function(e){return e.box&&(e.box.borderTopWidth||e.box.borderRightWidth||e.box.borderBottomWidth||e.box.borderLeftWidth)},renderBorders=function(e,t){if(!shouldRenderBorders(t))return t;var r=t.box,o=r.width,n=r.height,i=r.borderTopWidth,a=r.borderLeftWidth,s=r.borderRightWidth,l=r.borderBottomWidth,u=t.style,c=u.opacity,d=u.borderTopLeftRadius,h=void 0===d?0:d,g=u.borderTopRightRadius,p=void 0===g?0:g,f=u.borderBottomLeftRadius,R=void 0===f?0:f,m=u.borderBottomRightRadius,v=void 0===m?0:m,y=u.borderTopColor,b=void 0===y?"black":y,T=u.borderTopStyle,E=void 0===T?"solid":T,P=u.borderLeftColor,x=void 0===P?"black":P,C=u.borderLeftStyle,S=void 0===C?"solid":C,_=u.borderRightColor,O=void 0===_?"black":_,w=u.borderRightStyle,A=void 0===w?"solid":w,N=u.borderBottomColor,I=void 0===N?"black":N,L=u.borderBottomStyle,D={borderTopColor:b,borderTopWidth:i,borderTopStyle:E,borderLeftColor:x,borderLeftWidth:a,borderLeftStyle:S,borderRightColor:O,borderRightWidth:s,borderRightStyle:A,borderBottomColor:I,borderBottomWidth:l,borderBottomStyle:void 0===L?"solid":L,borderTopLeftRadius:h,borderTopRightRadius:p,borderBottomLeftRadius:R,borderBottomRightRadius:v},B=Math.min(p,.5*o,.5*n),F=Math.min(h,.5*o,.5*n),M=Math.min(v,.5*o,.5*n),k=Math.min(R,.5*o,.5*n);return e.save(),e.strokeOpacity(c),i&&(e.save(),clipBorderTop(e,t.box,D,B,F),fillBorderTop(e,t.box,D,B,F),e.restore()),s&&(e.save(),clipBorderRight(e,t.box,D,B,M),fillBorderRight(e,t.box,D,B,M),e.restore()),l&&(e.save(),clipBorderBottom(e,t.box,D,k,M),fillBorderBottom(e,t.box,D,k,M),e.restore()),a&&(e.save(),clipBorderLeft(e,t.box,D,k,F),fillBorderLeft(e,t.box,D,k,F),e.restore()),e.restore(),t},renderBorders$1=R.curryN(2,renderBorders),drawBackground=function(e){return function(t){if(t.box&&t.style.backgroundColor){var r=t.box,o=r.top,n=r.left,i=r.width,a=r.height;e.fillOpacity(t.style.opacity||1).fillColor(t.style.backgroundColor).rect(n,o,i,a).fill()}return t}},shouldRenderBackground=R.hasPath(["style","backgroundColor"]),renderBackground=function(e,t){return R.when(shouldRenderBackground,R.compose(restore(e),drawBackground(e),clipNode$1(e),save(e)))(t),t},renderBackground$1=R.curryN(2,renderBackground),getRotation=function(e){var t=/rotate\((-?\d+.?\d+)(.+)\)/g.exec(e);if(t&&t[1]&&t[2]){var r=t[1];return"rad"===t[2]?180*r/Math.PI:r}return 0},getTranslateX=function(e){var t=/translateX\((-?\d+\.?d*)\)/g.exec(e),r=/translate\((-?\d+\.?d*).*,\s*(-?\d+\.?d*).*\)/g.exec(e);return t&&t[1]?t[1]:r&&r[1]?r[1]:0},getTranslateY=function(e){var t=/translateY\((-?\d+\.?\d*)\)/g.exec(e),r=/translate\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:r&&r[2]?r[2]:0},getScaleX=function(e){var t=/scaleX\((-?\d+\.?\d*)\)/g.exec(e),r=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:r&&r[1]?r[1]:1},getScaleY=function(e){var t=/scaleY\((-?\d+\.?\d*)\)/g.exec(e),r=/scale\((-?\d+\.?\d*).*,\s*(-?\d+\.?\d*).*\)/g.exec(e);return t&&t[1]?t[1]:r&&r[2]?r[2]:1},getMatrix=function(e){var t=/matrix\(([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)\)/g.exec(e);return t?t.slice(1,7):null},applySingleTransformation=function(e,t,r){/rotate/g.test(t)?e.rotate(getRotation(t),{origin:r}):/scaleX/g.test(t)?e.scale(getScaleX(t),1,{origin:r}):/scaleY/g.test(t)?e.scale(1,getScaleY(t),{origin:r}):/scale/g.test(t)?e.scale(getScaleX(t),getScaleY(t),{origin:r}):/translateX/g.test(t)?e.translate(getTranslateX(t),1,{origin:r}):/translateY/g.test(t)?e.translate(1,getTranslateY(t),{origin:r}):/translate/g.test(t)?e.translate(getTranslateX(t),getTranslateY(t),{origin:r}):/matrix/g.test(t)&&e.transform.apply(e,getMatrix(t))},applyTransformations=function(e,t){if(!t.origin)return t;for(var r,o=/[a-zA-Z]+\([^)]+\)/g,n=[t.origin.left,t.origin.top],i=t.style&&t.style.transform||"";null!=(r=o.exec(i));)applySingleTransformation(e,r[0],n);return t},applyTransformations$1=R.curryN(2,applyTransformations),isNotText$1=R.complement(isText),renderNode=function e(t){return function(r){var o=R.tap(R.compose(R.forEach(e(t)),R.pathOr([],["children"])));return R.compose(restore(t),renderDebug$1(t),R.when(isNotText$1,o),R.cond([[isText,renderText$1(t)],[isLink,renderLink$1(t)],[isNote,renderNote$1(t)],[isImage,renderImage$1(t)],[isCanvas,renderCanvas$1(t)],[R.T,R.identity]]),renderBorders$1(t),renderBackground$1(t),applyTransformations$1(t),save(t),R.when(isPage,renderPage$1(t)))(r)}},renderDocument=function(e){return R.compose(R.forEach(R.compose(renderRulers$1(e),renderNode(e))),R.pathOr([],["children"]))},renderRoot=function(e){return R.compose(R.forEach(renderDocument(e)),R.pathOr([],["children"]))},render=function(e,t){return addMetadata$1(e)(t),renderRoot(e)(t),e.end(),Font$1.reset(),e},create=function(e){return e},absoluteFillObject={position:"absolute",top:0,left:0,bottom:0,right:0},StyleSheet={hairlineWidth:1,create:create,flatten:flatten,absoluteFillObject:absoluteFillObject},version="1.6.0",View=VIEW,Text=TEXT,Link=LINK,Page=PAGE,Note=NOTE,Image=IMAGE,Document=DOCUMENT,Canvas=CANVAS,pdf=function(e){var t=!0,r={type:"ROOT",children:[]},o=createRenderer(function(){t=!0}),n=o.createContainer(r);e&&s(e);var i=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(){var o,n,i;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new PDFDocument__default({autoFirstPage:!1}),console.time("layout"),e.next=4,layout(r);case 4:return n=e.sent,console.timeEnd("layout"),i=render(o,n),t=!1,e.abrupt("return",i);case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(o){var n,i;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,layout(r);case 2:return n=e.sent,i=render(o,n),t=!1,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function s(e){o.updateContainer(e,n,null)}function l(){return(l=_asyncToGenerator(_regeneratorRuntime.mark(function e(){var t,r;return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,r=t.pipe(BlobStream()),e.abrupt("return",new Promise(function(e,t){r.on("finish",function(){try{var o=r.toBlob("application/pdf");e(o)}catch(e){t(e)}}),r.on("error",t)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return{layout:function(){var e=_asyncToGenerator(_regeneratorRuntime.mark(function e(){return _regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",layout(r));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),isDirty:function(){return t},container:r,updateContainer:s,renderWithContext:a,toBlob:function(){return l.apply(this,arguments)},toString:toString}},svgpath=require("svgpath"),queue=require("queue"),canvasInstance=function(e){var t={},r={},o=e.getContext("2d"),n="white",i=function(){return t};return t.info={},t.end=i,t.font=i,t.translate=function(e,r){return o.translate(e,r),t},t.addPage=function(t){var r=t.size;e.width=r[0],e.height=r[1],o.clearRect(0,0,e.width,e.height)},t.save=function(){return o.save(),t},t.restore=function(){return o.restore(),t},t.moveTo=function(e,r){return o.moveTo(e,r),t},t.lineTo=function(e,r){return o.lineTo(e,r),t},t.bezierCurveTo=function(e,r,n,i,a,s){return o.bezierCurveTo(e,r,n,i,a,s),t},t.closePath=function(){return o.closePath(),t},t.clip=function(){return o.clip(),t},t.fillColor=function(e){return n=e,t},t.rect=function(e,r,n,i){return o.rect(e,r,n,i),t},t.fill=function(){return o.fillStyle=n,o.fill(),t},t.fillOpacity=function(e){return o.globalAlpha=e,t},t._addGlyphs=function(e,r){for(var n=0,i=0;i<e.length;i++){var a=e[i],s=r[i],l=svgpath(a.path.toSVG()).scale(1,-1).scale(20/2048).translate(n,0).toString();n+=s.xAdvance,o.fillStyle="#000";var u=new Path2D(l);o.stroke(u),o.fill(u)}return t},t.image=function(e,n,i,a){var s=a.width,l=a.height,u=btoa(String.fromCharCode.apply(null,e));if(r[u])o.drawImage(r[u],n,i,s,l);else{var c=document.createElement("img");c.src="data:image/png;base64,"+u,r[u]=c,c.onload=function(){o.drawImage(c,n,i,s,l)}}return t},t.clear=function(){o.clearRect(0,0,e.width,e.height)},t},CanvasViewer=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).ctx=null,t.instance=pdf(),t.renderQueue=queue({autostart:!0,concurrency:1}),t.state={layout:null,error:null},t.onRenderFailed=function(e){t.setState({error:e}),console.error(e)},t.onRenderSuccessful=function(e){t.setState({layout:e})},t}_inheritsLoose(t,e);var r=t.prototype;return r.componentDidMount=function(){this.ctx=canvasInstance(this.canvas),this.queueDocumentRender(this.props.children),this.renderQueue.on("error",this.onRenderFailed),this.renderQueue.on("success",this.onRenderSuccessful)},r.componentDidUpdate=function(e){e.children!==this.props.children&&this.queueDocumentRender(this.props.children)},r.queueDocumentRender=function(e){var t=this;this.renderQueue.splice(0,this.renderQueue.length,function(){return t.instance.updateContainer(e),t.instance.isDirty()&&!t.state.error?t.instance.renderWithContext(t.ctx):Promise.resolve()})},r.render=function(){var e=this;return React.createElement("canvas",{height:900,id:"myCanvas",ref:function(t){return e.canvas=t},style:{border:"1px solid black"},width:900})},t}(React.Component),queue$1=require("queue"),flatStyles=function(e){return e.reduce(function(e,t){return _extends({},e,t)},{})},Document$1=function(e){var t=e.children,r=_objectWithoutPropertiesLoose(e,["children"]);return React.createElement(Document,r,t)},InternalBlobProvider=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).instance=pdf(),t.renderQueue=queue$1({autostart:!0,concurrency:1}),t.state={blob:null,url:null,loading:!0,error:null},t.onRenderFailed=function(e){t.setState({error:e}),console.error(e)},t.onRenderSuccessful=function(e){var r=t.state.url;t.setState({blob:e,url:URL.createObjectURL(e),loading:!1},function(){return URL.revokeObjectURL(r)})},t}_inheritsLoose(t,e);var r=t.prototype;return r.componentDidMount=function(){this.queueDocumentRender(this.props.document),this.renderQueue.on("error",this.onRenderFailed),this.renderQueue.on("success",this.onRenderSuccessful)},r.componentDidUpdate=function(e){e.document!==this.props.document&&this.queueDocumentRender(this.props.document)},r.queueDocumentRender=function(e){var t=this;this.renderQueue.splice(0,this.renderQueue.length,function(){return t.instance.updateContainer(e),t.instance.isDirty()&&!t.state.error?t.instance.toBlob():Promise.resolve()})},r.render=function(){return this.props.children(this.state)},t}(React.PureComponent),BlobProvider=function(e){var t=e.document,r=e.children;return t?React.createElement(InternalBlobProvider,{document:t},r):(warning(!1,"You should pass a valid document to BlobProvider"),null)},PDFViewer=function(e){var t=e.className,r=e.style,o=e.children,n=e.innerRef,i=_objectWithoutPropertiesLoose(e,["className","style","children","innerRef"]);return React.createElement(InternalBlobProvider,{document:o},function(e){var o=e.url;return React.createElement("iframe",_extends({className:t,ref:n,src:o,style:Array.isArray(r)?flatStyles(r):r},i))})},PDFDownloadLink=function(e){var t=e.document,r=e.className,o=e.style,n=e.children,i=e.fileName,a=void 0===i?"document.pdf":i;if(!t)return warning(!1,"You should pass a valid document to PDFDownloadLink"),null;return React.createElement(InternalBlobProvider,{document:t},function(e){return React.createElement("a",{className:r,download:a,href:e.url,onClick:(t=e.blob,function(){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(t,a)}),style:Array.isArray(o)?flatStyles(o):o},"function"==typeof n?n(e):n);var t})},dom={pdf:pdf,View:View,Text:Text,Link:Link,Page:Page,Font:Font$1,Note:Note,Image:Image,Canvas:Canvas,version:version,Document:Document$1,PDFViewer:PDFViewer,StyleSheet:StyleSheet,CanvasViewer:CanvasViewer,BlobProvider:BlobProvider,PDFDownloadLink:PDFDownloadLink};exports.Document=Document$1,exports.BlobProvider=BlobProvider,exports.PDFViewer=PDFViewer,exports.PDFDownloadLink=PDFDownloadLink,exports.default=dom,exports.pdf=pdf,exports.View=View,exports.Text=Text,exports.Link=Link,exports.Page=Page,exports.Font=Font$1,exports.Note=Note,exports.Image=Image,exports.Canvas=Canvas,exports.version=version,exports.StyleSheet=StyleSheet,exports.CanvasViewer=CanvasViewer;
//# sourceMappingURL=react-pdf.browser.cjs.min.js.map
